{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u6b22\u8fce\u8bbf\u95ee ScratchHW Wiki \u00b6 ScratchHW (Scratch Hardware) \u8d77\u6e90\u4e8eScratch3\u3002\u662f\u4e00\u4e2a\u4e13\u95e8\u4e3a\u786c\u4ef6\u8bbe\u5907\u5b9a\u5236\u7684\u56fe\u5f62\u5316\u7f16\u7a0b\u8f6f\u4ef6\uff0c\u652f\u6301\u4ee3\u7801\u751f\u6210\u5f88\u7f16\u8bd1\u4e0b\u8f7d\u529f\u80fd\uff0c\u540c\u65f6\u4e5f\u652f\u6301\u5b9e\u65f6\u6a21\u5f0f\uff0c\u5373Scratch3\u539f\u672c\u7684EV3\u548cMicrobit\u7684\u63a7\u5236\u6a21\u5f0f\u3002 \u5feb\u901f\u5f00\u59cb \u00b6 \u6211\u662f\u666e\u901a\u7528\u6237 \u6211\u662f\u8f6f\u4ef6\u5f00\u53d1\u8005","title":"\u4e3b\u9875"},{"location":"#scratchhw-wiki","text":"ScratchHW (Scratch Hardware) \u8d77\u6e90\u4e8eScratch3\u3002\u662f\u4e00\u4e2a\u4e13\u95e8\u4e3a\u786c\u4ef6\u8bbe\u5907\u5b9a\u5236\u7684\u56fe\u5f62\u5316\u7f16\u7a0b\u8f6f\u4ef6\uff0c\u652f\u6301\u4ee3\u7801\u751f\u6210\u5f88\u7f16\u8bd1\u4e0b\u8f7d\u529f\u80fd\uff0c\u540c\u65f6\u4e5f\u652f\u6301\u5b9e\u65f6\u6a21\u5f0f\uff0c\u5373Scratch3\u539f\u672c\u7684EV3\u548cMicrobit\u7684\u63a7\u5236\u6a21\u5f0f\u3002","title":"\u6b22\u8fce\u8bbf\u95ee ScratchHW Wiki"},{"location":"#_1","text":"\u6211\u662f\u666e\u901a\u7528\u6237 \u6211\u662f\u8f6f\u4ef6\u5f00\u53d1\u8005","title":"\u5feb\u901f\u5f00\u59cb"},{"location":"changelog/","text":"","title":"\u53d8\u66f4\u8bb0\u5f55"},{"location":"i-am-normal-user/","text":"\u5f00\u59cb\u4f7f\u7528 ScratchHW \u00b6 \u5373\u5c06\u53d1\u884cBeta\u7248\u672c\u3002","title":"\u6211\u662f\u666e\u901a\u7528\u6237"},{"location":"i-am-normal-user/#scratchhw","text":"\u5373\u5c06\u53d1\u884cBeta\u7248\u672c\u3002","title":"\u5f00\u59cb\u4f7f\u7528 ScratchHW"},{"location":"i-am-software-developer/","text":"\u5f00\u59cb\u5f00\u53d1 ScratchHW \u00b6 \u5f00\u53d1\u73af\u5883 \u00b6 \u8bf7\u786e\u4fdd\u4f60\u7684\u8ba1\u7b97\u673a\u5df2\u7ecf\u5b89\u88c5\u597d\u4e86\u4ee5\u4e0b\u8f6f\u4ef6\u6216\u5de5\u5177\u3002 Node >8 python2.7 Git \u6ce8\u610f \uff1a\u5982\u679c\u4f60\u662f\u5728\u4e2d\u56fd\u5730\u533a\u6216\u5176\u4ed6\u7f51\u7edc\u53d7\u9650\u5730\u533a\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u8d2d\u4e70\u4e00\u4e2a\u7f51\u7edc\u4ee3\u7406\u624d\u80fd\u591f\u6210\u529f\u6267\u884c\u4e0b\u9762\u7684\u64cd\u4f5c\u5185\u5bb9\u3002\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\u8bbe\u7f6enpm\u7684\u7f51\u7edc\u4ee3\u7406\uff0c\u5c06\u4e0b\u9762\u7684server \u548c port \u66ff\u6362\u4e3a\u4f60\u7684\u4ee3\u7406\u5730\u5740\u548c\u7aef\u53e3\u3002 npm config set proxy http://server:port npm config set https-proxy http://server:port \u514b\u9686&\u5b89\u88c5 \u00b6 \u514b\u9686\u6240\u6709\u5de5\u7a0b\u6838\u5fc3\u4ed3\u5e93\u3002 (\u4f7f\u7528 --depth \u6307\u4ee4\u6765\u907f\u514d\u4e0b\u8f7d\u5168\u90e8\u7684\u4ed3\u5e93\u5386\u53f2\u5185\u5bb9\uff0c\u5426\u5219GUI\u7684\u5927\u5c0f\u5c06\u4f1a\u8d85\u8fc71.18GB) mkdir ScratchHW cd ScratchHW git clone --depth 3 https://github.com/ScratchHW/scratchhw-gui git clone --depth 3 https://github.com/ScratchHW/scratchhw-blocks git clone --depth 3 https://github.com/ScratchHW/scratchhw-vm git clone https://github.com/ScratchHW/scratchhw-link git clone https://github.com/ScratchHW/scratchhw-extension-server \u5b89\u88c5\u548c\u94fe\u63a5 install\u6307\u4ee4\u4f1a\u6839\u636epackage.json\u5185\u5bb9\u4e0b\u8f7d\u5b89\u88c5\u6240\u6709\u5fc5\u8981\u7684npm\u5305\uff0clink\u6307\u4ee4\u4f1a\u4ee5\u672c\u5730npm\u5305\u66ff\u6362\u9879\u76ee\u5185\u9ed8\u8ba4\u7684\u5305\uff0c\u8fd9\u6837\u4f60\u5728scratchhw-blocks\u7b49\u5305\u4e2d\u7684\u4fee\u6539\u624d\u4f1a\u88abscratchhw-gui\u4f7f\u7528\uff0c\u5426\u5219\u5b83\u9ed8\u8ba4\u4f7f\u7528\u7684\u5c06\u4f1a\u662f\u4ecenpm\u670d\u52a1\u5668\u4e0b\u8f7d\u7684\u5185\u5bb9\uff0c\u4f60\u53ef\u4ee5\u67e5\u770bscratchhw-gui/node_modules\u4e0b\u7684scratchhw-blocks\u4e0escratchhw-vm\u7684\u6587\u4ef6\u5939\uff0c\u5982\u679clink\u6210\u529f\uff0c\u90a3\u4e48\u4ed6\u4eec\u5c06\u88ab\u94fe\u63a5\u5230\u672c\u5730\u514b\u9686\u4e0b\u6765\u7684\u5de5\u7a0b\u7684\u4f4d\u7f6e\u3002 cd scratchhw-blocks npm install npm link cd .. cd scratchhw-vm npm install npm link cd .. cd scratchhw-gui npm install npm link scratchhw-blocks scratchhw-vm cd .. cd scratchhw-link npm install cd .. cd scratchhw-extension-server npm install cd .. \u590d\u5236Arduino IDE\u5230\u8def\u5f84\uff1a scratchhw-link\\tools\\Arduino\\* \uff0c\u5b8c\u6210\u540e\u7684\u6587\u4ef6\u6811\u7ed3\u6784\u5c06\u5982\u4e0b\u9762\u6240\u793a\u3002 scratchhw-link\\tools\\ |- Arduino\\ |- drivers\\ |- examples\\ |- hardware\\ |- java\\ ... |- arduino.exe |- arduino_debug.exe \u8fd0\u884c \u00b6 \u542f\u52a8\u786c\u4ef6\u63a5\u53e3\u670d\u52a1\u5668 scratchhw-link cd scratchhw-link npm start \u542f\u52a8\u63d2\u4ef6\u5185\u90e8\u670d\u52a1\u5668 scratchhw-extension-server \u5728\u65b0\u7684\u4e00\u4e2a\u7ec8\u7aef\u4e2d\u6267\u884c\u3002 cd scratchhw-extension-server npm start \u542f\u52a8 scratchhw-gui \u5728\u65b0\u7684\u4e00\u4e2a\u7ec8\u7aef\u4e2d\u6267\u884c\u3002 cd scratchhw-gui npm run start-open \u5728scratchhw-gui\u7684webpack\u6784\u5efa\u5b8c\u6210\u540e\uff0c\u5c06\u4f1a\u6709\u5f39\u51fascratchhw-gui\u7684\u7f51\u9875\uff0c\u5f00\u59cb\u4f7f\u7528\u5427~\u3002\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u8f93\u5165\u5730\u5740 http://127.0.0.1:8601/ \u6765\u8bbf\u95ee\u3002 \u4e86\u89e3\u66f4\u591a\u5f00\u53d1\u5185\u5bb9 \u00b6 \u6784\u67b6\u4ecb\u7ecd \u5982\u4f55\u6dfb\u52a0\u65b0\u7684\u8bbe\u5907 \u5982\u4f55\u6dfb\u52a0\u65b0\u7684\u6269\u5c55","title":"\u6211\u662f\u8f6f\u4ef6\u5f00\u53d1\u8005"},{"location":"i-am-software-developer/#scratchhw","text":"","title":"\u5f00\u59cb\u5f00\u53d1 ScratchHW"},{"location":"i-am-software-developer/#_1","text":"\u8bf7\u786e\u4fdd\u4f60\u7684\u8ba1\u7b97\u673a\u5df2\u7ecf\u5b89\u88c5\u597d\u4e86\u4ee5\u4e0b\u8f6f\u4ef6\u6216\u5de5\u5177\u3002 Node >8 python2.7 Git \u6ce8\u610f \uff1a\u5982\u679c\u4f60\u662f\u5728\u4e2d\u56fd\u5730\u533a\u6216\u5176\u4ed6\u7f51\u7edc\u53d7\u9650\u5730\u533a\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u8d2d\u4e70\u4e00\u4e2a\u7f51\u7edc\u4ee3\u7406\u624d\u80fd\u591f\u6210\u529f\u6267\u884c\u4e0b\u9762\u7684\u64cd\u4f5c\u5185\u5bb9\u3002\u901a\u8fc7\u4ee5\u4e0b\u6307\u4ee4\u8bbe\u7f6enpm\u7684\u7f51\u7edc\u4ee3\u7406\uff0c\u5c06\u4e0b\u9762\u7684server \u548c port \u66ff\u6362\u4e3a\u4f60\u7684\u4ee3\u7406\u5730\u5740\u548c\u7aef\u53e3\u3002 npm config set proxy http://server:port npm config set https-proxy http://server:port","title":"\u5f00\u53d1\u73af\u5883"},{"location":"i-am-software-developer/#_2","text":"\u514b\u9686\u6240\u6709\u5de5\u7a0b\u6838\u5fc3\u4ed3\u5e93\u3002 (\u4f7f\u7528 --depth \u6307\u4ee4\u6765\u907f\u514d\u4e0b\u8f7d\u5168\u90e8\u7684\u4ed3\u5e93\u5386\u53f2\u5185\u5bb9\uff0c\u5426\u5219GUI\u7684\u5927\u5c0f\u5c06\u4f1a\u8d85\u8fc71.18GB) mkdir ScratchHW cd ScratchHW git clone --depth 3 https://github.com/ScratchHW/scratchhw-gui git clone --depth 3 https://github.com/ScratchHW/scratchhw-blocks git clone --depth 3 https://github.com/ScratchHW/scratchhw-vm git clone https://github.com/ScratchHW/scratchhw-link git clone https://github.com/ScratchHW/scratchhw-extension-server \u5b89\u88c5\u548c\u94fe\u63a5 install\u6307\u4ee4\u4f1a\u6839\u636epackage.json\u5185\u5bb9\u4e0b\u8f7d\u5b89\u88c5\u6240\u6709\u5fc5\u8981\u7684npm\u5305\uff0clink\u6307\u4ee4\u4f1a\u4ee5\u672c\u5730npm\u5305\u66ff\u6362\u9879\u76ee\u5185\u9ed8\u8ba4\u7684\u5305\uff0c\u8fd9\u6837\u4f60\u5728scratchhw-blocks\u7b49\u5305\u4e2d\u7684\u4fee\u6539\u624d\u4f1a\u88abscratchhw-gui\u4f7f\u7528\uff0c\u5426\u5219\u5b83\u9ed8\u8ba4\u4f7f\u7528\u7684\u5c06\u4f1a\u662f\u4ecenpm\u670d\u52a1\u5668\u4e0b\u8f7d\u7684\u5185\u5bb9\uff0c\u4f60\u53ef\u4ee5\u67e5\u770bscratchhw-gui/node_modules\u4e0b\u7684scratchhw-blocks\u4e0escratchhw-vm\u7684\u6587\u4ef6\u5939\uff0c\u5982\u679clink\u6210\u529f\uff0c\u90a3\u4e48\u4ed6\u4eec\u5c06\u88ab\u94fe\u63a5\u5230\u672c\u5730\u514b\u9686\u4e0b\u6765\u7684\u5de5\u7a0b\u7684\u4f4d\u7f6e\u3002 cd scratchhw-blocks npm install npm link cd .. cd scratchhw-vm npm install npm link cd .. cd scratchhw-gui npm install npm link scratchhw-blocks scratchhw-vm cd .. cd scratchhw-link npm install cd .. cd scratchhw-extension-server npm install cd .. \u590d\u5236Arduino IDE\u5230\u8def\u5f84\uff1a scratchhw-link\\tools\\Arduino\\* \uff0c\u5b8c\u6210\u540e\u7684\u6587\u4ef6\u6811\u7ed3\u6784\u5c06\u5982\u4e0b\u9762\u6240\u793a\u3002 scratchhw-link\\tools\\ |- Arduino\\ |- drivers\\ |- examples\\ |- hardware\\ |- java\\ ... |- arduino.exe |- arduino_debug.exe","title":"\u514b\u9686&amp;\u5b89\u88c5"},{"location":"i-am-software-developer/#_3","text":"\u542f\u52a8\u786c\u4ef6\u63a5\u53e3\u670d\u52a1\u5668 scratchhw-link cd scratchhw-link npm start \u542f\u52a8\u63d2\u4ef6\u5185\u90e8\u670d\u52a1\u5668 scratchhw-extension-server \u5728\u65b0\u7684\u4e00\u4e2a\u7ec8\u7aef\u4e2d\u6267\u884c\u3002 cd scratchhw-extension-server npm start \u542f\u52a8 scratchhw-gui \u5728\u65b0\u7684\u4e00\u4e2a\u7ec8\u7aef\u4e2d\u6267\u884c\u3002 cd scratchhw-gui npm run start-open \u5728scratchhw-gui\u7684webpack\u6784\u5efa\u5b8c\u6210\u540e\uff0c\u5c06\u4f1a\u6709\u5f39\u51fascratchhw-gui\u7684\u7f51\u9875\uff0c\u5f00\u59cb\u4f7f\u7528\u5427~\u3002\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7\u624b\u52a8\u8f93\u5165\u5730\u5740 http://127.0.0.1:8601/ \u6765\u8bbf\u95ee\u3002","title":"\u8fd0\u884c"},{"location":"i-am-software-developer/#_4","text":"\u6784\u67b6\u4ecb\u7ecd \u5982\u4f55\u6dfb\u52a0\u65b0\u7684\u8bbe\u5907 \u5982\u4f55\u6dfb\u52a0\u65b0\u7684\u6269\u5c55","title":"\u4e86\u89e3\u66f4\u591a\u5f00\u53d1\u5185\u5bb9"},{"location":"license/","text":"MIT License Copyright \u00a9 2020 ArthurZheng Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.","title":"\u8bb8\u53ef\u8bc1"},{"location":"software-developer-reference/code-generator/","text":"\u4ee3\u7801\u751f\u6210\u5668 \u00b6 \u5f85\u8865\u5145","title":"\u4ee3\u7801\u751f\u6210\u5668"},{"location":"software-developer-reference/code-generator/#_1","text":"\u5f85\u8865\u5145","title":"\u4ee3\u7801\u751f\u6210\u5668"},{"location":"software-developer-reference/framework-introduction/","text":"\u6784\u67b6\u4ecb\u7ecd \u00b6 GUI - \u57fa\u4e8eReact\u7684\u524d\u7aef\u7528\u6237\u754c\u9762\u3002 VM - \u7ba1\u7406\u72b6\u6001\u548c\u8fd0\u884c\u540e\u53f0\u903b\u8f91\u4ee3\u7801\uff0c\u63a5\u6536GUI\u7684\u64cd\u4f5c\u8bf7\u6c42\u5e76\u53d1\u9001\u72b6\u6001\u548c\u4e8b\u4ef6\u7ed9GUI\u3002 Blocks - \u4eceGoogle Blockly \u9879\u76ee\u521b\u5efa\u7684\u5206\u652f\u3002\u8fd9\u4e2a\u4ed3\u5e93\u540c\u65f6\u5904\u7406\u5b9e\u73b0\u79ef\u6728\u5757\uff08blocks\uff09\u7684UI\u663e\u793a\u3001\u903b\u8f91\u529f\u80fd\u4ee5\u53ca\u4ee3\u7801\u751f\u6210\u529f\u80fd\uff0c\u5b83\u901a\u8fc7VM\u88abGUI\u8c03\u7528\u3002 Link - \u4e3a\u524d\u7aef\u7a0b\u5e8f\u63d0\u4f9b\u672c\u5730\u786c\u4ef6\u63a5\u53e3\u529f\u80fd\u7684\u670d\u52a1\u5668\u3002 Extension Server - \u4e3a\u524d\u7aef\u7a0b\u5e8f\u63d0\u4f9b\u672c\u5730\u4fdd\u5b58\u7684\u63d2\u4ef6\u6587\u4ef6\u7684\u670d\u52a1\u5668\u3002","title":"\u6784\u67b6\u4ecb\u7ecd"},{"location":"software-developer-reference/framework-introduction/#_1","text":"GUI - \u57fa\u4e8eReact\u7684\u524d\u7aef\u7528\u6237\u754c\u9762\u3002 VM - \u7ba1\u7406\u72b6\u6001\u548c\u8fd0\u884c\u540e\u53f0\u903b\u8f91\u4ee3\u7801\uff0c\u63a5\u6536GUI\u7684\u64cd\u4f5c\u8bf7\u6c42\u5e76\u53d1\u9001\u72b6\u6001\u548c\u4e8b\u4ef6\u7ed9GUI\u3002 Blocks - \u4eceGoogle Blockly \u9879\u76ee\u521b\u5efa\u7684\u5206\u652f\u3002\u8fd9\u4e2a\u4ed3\u5e93\u540c\u65f6\u5904\u7406\u5b9e\u73b0\u79ef\u6728\u5757\uff08blocks\uff09\u7684UI\u663e\u793a\u3001\u903b\u8f91\u529f\u80fd\u4ee5\u53ca\u4ee3\u7801\u751f\u6210\u529f\u80fd\uff0c\u5b83\u901a\u8fc7VM\u88abGUI\u8c03\u7528\u3002 Link - \u4e3a\u524d\u7aef\u7a0b\u5e8f\u63d0\u4f9b\u672c\u5730\u786c\u4ef6\u63a5\u53e3\u529f\u80fd\u7684\u670d\u52a1\u5668\u3002 Extension Server - \u4e3a\u524d\u7aef\u7a0b\u5e8f\u63d0\u4f9b\u672c\u5730\u4fdd\u5b58\u7684\u63d2\u4ef6\u6587\u4ef6\u7684\u670d\u52a1\u5668\u3002","title":"\u6784\u67b6\u4ecb\u7ecd"},{"location":"software-developer-reference/how-to-add-a-new-device/","text":"\u5982\u4f55\u6dfb\u52a0\u65b0\u7684\u8bbe\u5907 \u00b6 \u7b80\u4ecb \u00b6 \u5728Scratch-HW\u4e2d\u8bbe\u5907\u5c31\u662f\u5728\u6307\u63a7\u5236\u677f\u5982\uff1aArduino UNO\u3001Arduino Nano\u7b49\u3002 \u6ce8\u610f \uff1a\u5728\u5f00\u542f\u5728scratchhw-gui\u7684webpack\u670d\u52a1\u5668\u65f6\uff0c\u5bf9\u6b64\u6587\u4ef6\u4e2d\u7684\u6539\u52a8\u4f1a\u81ea\u52a8\u89e6\u53d1webpack\u91cd\u65b0\u7f16\u8bd1\u6253\u5305\uff0c\u6240\u4ee5\u4fee\u6539\u6587\u4ef6\u6216\u4ee3\u7801\u540e\u76f4\u63a5\u4fdd\u5b58\u5373\u53ef\u67e5\u770b\u6548\u679c\uff0c\u4e0d\u9700\u8981\u91cd\u65b0\u542f\u52a8webpack\uff08\u5373\u91cd\u65b0\u6267\u884c npm run start-open \u6216 npm run start \u6307\u4ee4 \uff09\u3002 \u5728scratchhw-gui\u6dfb\u52a0\u8bbe\u5907\u56fe\u7247\u548c\u914d\u7f6e \u00b6 \u6839\u636e\u4ee5\u4e0b\u53c2\u6570\u4e0e\u793a\u4f8b\u5236\u4f5c\u63a7\u5236\u677f\u7684\u56fe\u7247\uff0c\u8bf7\u786e\u4fdd\u5728\u5468\u56f4\u7559\u6709\u76d2\u9002\u5bbd\u5ea6\u7684\u767d\u8272\u8fb9\u7f18\u3002 \u8fd9\u4e2a\u56fe\u7247\u5c06\u7528\u4e8e\u663e\u793a\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u4e2d\u3002 \u683c\u5f0f \uff1apng \u5206\u8fa8\u7387 \uff1a600x372 \u80cc\u666f\u8272 \uff1a\u767d\u8272 \u4f60\u53ef\u4ee5\u76f4\u63a5\u4fdd\u5b58\u4e0b\u9762\u8fd9\u4e2a\u56fe\u7247\u6765\u53c2\u8003\u5236\u4f5c\uff0c\u5728\u5b8c\u6210\u540e\u4ee5\u9a7c\u5cf0\u89c4\u5219\u547d\u540d\u8fd9\u4e2a\u56fe\u7247\u6587\u4ef6\uff0c\u5982\uff1a`arduinoUno.png \u7531\u524d\u4e0a\u4e00\u6b65\u5236\u4f5c\u7684\u56fe\u7247\u5236\u4f5csvg\u56fe\u3002\u8fd9\u6b65\u5236\u4f5c\u7684\u4e24\u4e2a\u56fe\u7247\u5c06\u7528\u4e8e\u5728\u8fde\u63a5\u8bbe\u5907\u65f6\u663e\u793a\u3002 \u5c06\u63a7\u5236\u677f\u4e3b\u4f53\u6263\u51fa\u5220\u9664\u56fe\u7247\u7684\u80cc\u666f\uff0c\u5c06\u56fe\u7247\u957f\u5bbd\u6bd4\u8c03\u6574\u4e3a108\uff1a87\uff0c\u63a7\u5236\u677f\u8981\u5c3d\u53ef\u80fd\u7684\u8d34\u8fd1\u56fe\u7247\u8fb9\u7f18\uff0c\u51cf\u5c0f\u7a7a\u767d\uff0c\u800c\u540e\u4fdd\u5b58\u4e3apng\u683c\u5f0f\u3002\u800c\u540e\u5c06\u56fe\u7247\u4ee5\u540c\u6837\u7684\u8981\u6c42\u8c03\u6574\u957f\u5bbd\u6bd4\u4e3a1\uff1a1\uff0c\u518d\u6b21\u4fdd\u5b58\u3002 \u8bbf\u95ee\u8fd9\u4e2a\u5728\u7ebf\u683c\u5f0f\u8f6c\u6362\u7684\u7f51\u7ad9\uff1a aconvert.com \u3002\u5c06\u521a\u521a\u5236\u4f5c\u597d\u7684\u4e24\u5f20\u56fe\u7247\u4e0a\u4f20\u8f6c\u6362\u4e3aSVG\u683c\u5f0f\uff0c\u8bb0\u4f4f\u8981\u9009\u62e9**Resize image**\u9009\u9879\uff0c\u5c06\u5176\u5206\u522b\u8bbe\u7f6e\u4e3a 108x87**\u548c**40x40 \u3002 \u4fdd\u5b58108x87 \u7684\u56fe\u7247\u540d\u79f0\u4e3a\uff1a <board name>-illustration.svg \uff0c\u5982\uff1a arduinoUno-illustration.svg \u4fdd\u5b5840x40\u7684\u56fe\u7247\u540d\u79f0\u4e3a\uff1a <board name>-small.svg \uff0c\u5982 : arduinoUno-small.svg \u5c06\u5236\u4f5c\u597d\u7684\u4e09\u5f20\u56fe\u7247\u653e\u7f6e\u5230\u4ee5\u63a7\u5236\u677f\u7684\u540d\u79f0\u547d\u540d\u7684\u6587\u4ef6\u5939\u4e2d\uff0c\u5982\uff1a arduinoUno \uff0c\u5c06\u5176\u79fb\u52a8\u5230\u8def\u5f84 scratchhw-gui\\src\\lib\\libraries\\devices\\ \u4e0b\u3002 \u5b8c\u6210\u540e\u6587\u4ef6\u6811\u7ed3\u6784\u5c06\u5982\u4e0b\u6240\u793a\uff1a scratchhw-gui \\s rc \\l ib \\l ibraries \\d evices \\ | - arduinoLeonardo \\ | - arduinoMega2560 \\ | - baseToolbox \\ | - ... | - <board name> \\ | - <board name>.png | - <board name>-illustration.svg | - <board name>-small.svg | - index.jsx \u4fee\u6539 index.jsx \u3002 \u5728 scratchhw-gui\\src\\lib\\libraries\\devices\\index.jsx \u6587\u4ef6\u4e2d\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u6709\u4e00\u4e9b\u8bbe\u5907\u7684\u4ee3\u7801\u5728\u8fd9\u91cc\u4e86\uff0c\u6211\u4ee5Arduino UNO\u7684\u53c2\u6570\u4e3e\u4f8b\u3002 \u9996\u5148\uff0cimport \u8d44\u6e90\u56fe\u7247\u3002 import arduinoUnoIconURL from './arduinoUno/arduinoUno.png' ; import arduinoUnoConnectionIconURLL from './arduinoUno/arduinoUno-illustration.svg' ; import arduinoUnoConnectionSmallIconURL from './arduinoUno/arduinoUno-small.svg' ; \u800c\u540e\u8bbe\u7f6e\u8bbe\u5907\u3002 { name : 'Arduino Uno' , deviceId : 'arduinoUno' , collaborator : 'arduino' , type : 'arduino' , iconURL : arduinoUnoIconURL , description : ( < FormattedMessage defaultMessage = \"The best board to get started with electronics and coding.\" description = \"Description for the Arduino Uno device\" id = \"gui.device.arduinoUno.description\" /> ), featured : true , disabled : false , bluetoothRequired : false , serialportRequired : true , internetConnectionRequired : false , launchPeripheralConnectionFlow : true , useAutoScan : false , connectionIconURL : arduinoUnoConnectionIconURLL , connectionSmallIconURL : arduinoUnoConnectionSmallIconURL , connectingMessage : ( < FormattedMessage defaultMessage = \"Connecting\" description = \"Message to help people connect to their arduino.\" id = \"gui.device.arduino.connectingMessage\" /> ), baseToolBoxXml : arduinoBaseToolBox , programMode : [ 'realtime' , 'upload' ], programLanguage : [ 'block' , 'c' , 'cpp' ], helpLink : 'https://store.arduino.cc/usa/arduino-uno-rev3' } * \u661f\u53f7\u4ee3\u8868\u8fd9\u4e2a\u53c2\u6570\u662f\u5fc5\u987b\u7684 name* \u8bbe\u5907\u663e\u793a\u7684\u540d\u79f0\u3002 deviceId* \u8bbe\u5907ID\uff0c\u5c06\u88ab\u5728scratchhw-vm\u52a0\u8f7d\u8bbe\u5907\u65f6\u4f7f\u7528\u3002 collaborator \u8fd9\u4e2a\u5c06\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u4e2d\u7684\u5408\u4f5c\u8005\u6761\u76ee\u4e2d\u663e\u793a\u3002 type* \u544a\u8bc9GUI\u8be5\u4f7f\u7528\u54ea\u4e2a\u4ee3\u7801\u751f\u6210\u5668\u3002 iconURL* \u5c06\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u4e2d\u663e\u793a\u3002 description \u5c06\u4f1a\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u7684iconURL\u4e0b\u65b9\u663e\u793a\uff0c\u8fd9\u91cc\u4f7f\u7528\u4e86FormattedMessage\u6765\u63d0\u4f9b\u591a\u79cd\u8bed\u8a00\u4e0b\u7684\u4e0d\u540c\u7ffb\u8bd1\u5185\u5bb9\u3002 featured* \u8fd9\u662f\u4e00\u4e2a\u5185\u90e8\u53c2\u6570\uff0c\u4ed6\u59cb\u7ec8\u5e94\u8be5\u88ab\u8bbe\u7f6e\u4e3atrue\u3002 disabled \u5982\u679c\u8bbe\u7f6e\u4e3atrue\uff0c\u5c06\u4f1a\u7981\u7528\u8fd9\u4e2a\u8bbe\u5907\u9009\u9879\uff0c\u5c06\u663e\u793a\u4e3a\u7070\u8272\u5e76\u65e0\u6cd5\u88ab\u9009\u53d6\u3002 bluetoothRequired/serialportRequired/internetConnectionRequired \u8bbe\u7f6e\u4e3atrue\u5c06\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u8981\u6c42\u680f\u4e2d\u663e\u793a\u5bf9\u5e94\u8fde\u63a5\u7684\u56fe\u6807\uff0c\u8fd9\u51e0\u4e2a\u53c2\u6570\u53ea\u7528\u4e8e\u663e\u793a\u56fe\u6807\u4e0d\u4f1a\u5f71\u54cd\u5b9e\u9645\u7684\u8fde\u63a5\u529f\u80fd\u3002 launchPeripheralConnectionFlow* \u8bbe\u7f6e\u4e3atrue\u4f1a\u5728\u9009\u62e9\u8bbe\u5907\u540e\u5f00\u542f\u8bbe\u5907\u8fde\u63a5\u754c\u9762\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3atrue\u3002 useAutoScan \u8bbe\u7f6e\u4e3atrue\uff0c\u5c06\u4f1a\u81ea\u52a8\u8fde\u63a5\u626b\u63cf\u51fa\u7684\u8bbe\u5907\uff0c\u4e0d\u5efa\u8bae\u5f00\u542f\u3002 connectionIconURL* \u5c06\u7528\u4e8e\u5728\u8bbe\u5907\u8fde\u63a5\u754c\u9762\u4e2d\u663e\u793a\u3002 connectionSmallIconURL* \u5c06\u663e\u793a\u5728\u8bbe\u5907\u8fde\u63a5\u754c\u9762\u7684\u9876\u90e8\u680f\u4e2d\u3002 connectingMessage* \u8fd9\u4e2a\u4fe1\u606f\u5c06\u5728\u8bbe\u5907\u8fde\u63a5\u65f6\u663e\u793a\uff0c\u4e0d\u5efa\u8bae\u4fee\u6539\u6b64\u5185\u5bb9\u3002 baseToolBoxXml* \u63d0\u4f9b\u8bbe\u5907\u7684\u57fa\u7840\u79ef\u6728\u5185\u5bb9\uff0c\u4e0d\u5efa\u8bae\u4fee\u6539\u3002 programMode* \u5728\u8bbe\u5907\u4e0d\u652f\u6301\u5bf9\u5e94\u7684\u7f16\u7a0b\u6a21\u5f0f\u65f6\uff0c\u4f1a\u81ea\u52a8\u5207\u6362\u5230\u652f\u6301\u7684\u6a21\u5f0f\u5e76\u9501\u5b9a\u6a21\u5f0f\u5207\u6362\u5f00\u5173\u3002\u540c\u65f6\u4e5f\u63a7\u5236\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u4e2d\u7f16\u7a0b\u6a21\u5f0f\u680f\u4e2d\u7684\u663e\u793a\u3002 programLanguage* \u4ec5\u7528\u4e8e\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u4e2d\u7f16\u7a0b\u8bed\u8a00\u680f\u4e2d\u63a7\u5236\u56fe\u6807\u663e\u793a\u3002 helpLink \u5c06\u7528\u4e8e\u8bbe\u5907\u8fde\u63a5\u754c\u9762\u4e2d\uff0c\u70b9\u51fb\u8be5\u754c\u9762\u4e2d\u7684\u5e2e\u52a9\u6309\u94ae\u5c31\u4f1a\u6253\u5f00\u8fd9\u4e2a\u94fe\u63a5\u3002 \u5728\u5b8c\u6210\u8fd9\u4e9b\u5de5\u4f5c\u540e\uff0c\u4f60\u5e94\u8be5\u80fd\u591f\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u4e2d\u770b\u5230\u65b0\u6dfb\u52a0\u7684\u8bbe\u5907\u4e86\uff0c\u4f46\u662f\u5982\u679c\u6211\u4eec\u70b9\u51fb\u5b83\uff0c\u4ec0\u4e48\u90fd\u4e0d\u4f1a\u53d1\u9001\uff0c\u6211\u4eec\u4ecd\u9700\u8981\u5728scratchhw-vm\u4e2d\u6dfb\u52a0\u8bbe\u5907\u7684\u4ee3\u7801\u3002 \u5728scratchhw-vm\u4e2d\u6dfb\u52a0\u8bbe\u5907\u4ee3\u7801 \u00b6 \u57fa\u7840\u529f\u80fd\u4ee3\u7801 \u00b6 \u6ce8\u610f \uff1a\u7531\u4e8e\u76ee\u524d\u53ea\u5b8c\u6210\u4e86Arduino\u8bbe\u5907\u7684\u5185\u5bb9\uff0c\u6240\u4ee5\u4ee5\u4e0b\u5185\u5bb9\u4ec5\u9002\u7528\u4e8eArduino\u8bbe\u5907\uff0c\u5176\u4ed6\u7c7b\u578b\u7684\u8bbe\u5907\u5c06\u5728\u4e4b\u540e\u88ab\u6dfb\u52a0\u3002 \u5728 scratchhw-vm\\src\\devices \u8def\u5f84\u4e0b\u521b\u5efa\u4e00\u65b0\u7684\u6587\u4ef6\u5939\uff0c\u547d\u540d\u4e3a\u63a7\u5236\u677f\u7684\u540d\u79f0\uff0c\u5982\uff1a arduinoUno \u3002\u590d\u5236 src\\devices\\arduinoUno\\index.js \u5230\u8fd9\u4e2a\u65b0\u7684\u6587\u4ef6\u5939\u4e2d\uff0c\u5b8c\u6210\u540e\u6587\u4ef6\u6811\u7ed3\u6784\u5c06\u5982\u4e0b\u6240\u793a\uff1a scratchhw-vm\\src\\devices\\ |- arduinoLeonardo\\ |- arduinoMega2560\\ |- ... |- <board name>\\ |- index.js \u73b0\u5728\u6211\u4eec\u6765\u5f00\u59cb\u4fee\u6539index.js\u6587\u4ef6\u3002 \u5728\u6587\u4ef6\u4e2d\uff0c\u6ce8\u91ca\u4ee3\u7801\u7684\u6ce8\u91ca\u90fd\u5df2\u7ecf\u5f88\u8be6\u7ec6\u4e86\uff0c\u4e0b\u9762\u4ec5\u4ecb\u7ecd\u4f60\u9700\u8981\u4fee\u6539\u7684\u5185\u5bb9\u90e8\u5206\uff0c\u548c\u6587\u4ef6\u6846\u67b6\u7ed3\u6784\u3002 \u8fd9\u4e2a\u6587\u4ef6\u4e2d\u5206\u4e24\u4e2aClass\uff0c ArduinoUno \u4e0e Scratch3ArduinoUnoDevice \uff0c\u524d\u8005\u8d1f\u8d23\u5b9e\u73b0\u4e0e\u786c\u4ef6\u7684\u63a5\u53e3\u901a\u8baf\u7b49\u5185\u5bb9\uff0c\u540e\u8005\u7528\u4e8e\u5b9e\u73b0\u8bbe\u5907\u7684\u79ef\u6728\u5757\u5185\u5bb9\uff0c\u540c\u65f6\u4f1a\u8c03\u7528\u524d\u8005\uff0c\u901a\u8fc7\u524d\u8005\u7684\u63a5\u53e3\u51fd\u6570\u79ef\u6728\u5f00\u5728\u5b9e\u65f6\u6a21\u5f0f\u4e0b\u7684\u529f\u80fd\u4ee3\u7801\u3002 PID/VID\u8fc7\u6ee4\u5668 /* A list of USB device filters. If include '*' means disable the filter */ const PNPID_LIST = [ //https://github.com/arduino/Arduino/blob/1.8.0/hardware/arduino/avr/boards.txt#L51-L58 'USB\\\\VID_2341&PID_0043' , 'USB\\\\VID_2341&PID_0001' , 'USB\\\\VID_2A03&PID_0043' , 'USB\\\\VID_2341&PID_0243' , // For chinese clones that use CH340 'USB\\\\VID_1A86&PID_7523' // Uncomment this to close filter // '*' ]; \u8fd9\u4e2a\u5217\u8868\u5c06\u4f1a\u63a7\u5236scratchhw-link\u8fc7\u6ee4\u4e32\u53e3\u8bbe\u5907\uff0c\u9632\u6b62\u7528\u6237\u4e3a\u8ba1\u7b97\u673a\u4e0a\u81ea\u5e26\u7684\u4e32\u53e3\u6216\u5176\u4ed6\u4e0d\u76f8\u5173\u8bbe\u5907\u7684\u4e32\u53e3\u6240\u56f0\u60d1\u3002 \u8bbe\u5907\u53c2\u6570 /** * Configuration of build and flash. Used by arduino_debug and avrdude. * @readonly */ const DIVECE_OPT = { type : 'arduino' , board : 'arduino:avr:uno' , partno : 'atmega328p' } type \u53c2\u6570\u544a\u8bc9scratchhw-link\u4f7f\u7528\u90a3\u79cd\u7f16\u8bd1\u5668\u548c\u70e7\u5199\u8f6f\u4ef6\u6765\u63a5\u6536\u5904\u7406\u4e0a\u4f20\u8bf7\u6c42\u3002 board \u53c2\u6570\u7528\u4e8e\u63d0\u4f9b\u7ed9arduino_debug.exe\u3002\u8bbe\u5b9a\u8fd9\u4e2a\u53c2\u6570\u4e0e\u6211\u4eec\u5728Arduino IDE\u4e2d\u9009\u62e9\u63a7\u5236\u677f\u7c7b\u578b\u7684\u64cd\u4f5c\u672c\u8d28\u662f\u4e00\u6837\u7684\u3002 \u8bbf\u95ee Arduino manpage.adoc \u4e86\u89e3\u66f4\u591a\u53c2\u6570\u9009\u9879\u548c\u542b\u4e49\u3002 partno \u53c2\u6570\u7528\u63d0\u4f9b\u63a7\u5236\u677f\u7684MCU\u578b\u53f7\u7ed9avrdude\u3002\u8bbf\u95ee avrdude Option-Descriptions \u4e86\u89e3\u66f4\u591a\u53c2\u6570\u9009\u9879\u548c\u542b\u4e49\u3002 \u76ee\u5f55\u4e0e\u79ef\u6728 /** * @returns {Array.<object>} metadata for this extension and its blocks. */ getInfo () { return [ { // ... blocks : [ { // ... programMode : [ ProgramModeType . UPLOAD ] } ] //... }, { //... } ] } \u4e0e\u5e38\u89c4scratchhw-vm extension\u4e0d\u540c\u7684\u662f\uff0c\u6b64\u5904\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\u6570\u7ec4\uff0c\u5305\u542b\u591a\u4e2a\u76ee\u5f55\u3002\u5176\u4e2dprogramMode\u7528\u4e8e\u8bbe\u5b9a\u79ef\u6728\u652f\u6301\u7684\u7f16\u7a0b\u6a21\u5f0f\uff0c\u5982\u679c\u6ca1\u6709\u8bbe\u5b9a\u8fd9\u4e2a\u53c2\u6570\u5219\u9ed8\u8ba4\u90fd\u652f\u6301\u3002 \u5b9e\u65f6\u6a21\u5f0f\u529f\u80fd\u4ee3\u7801 \u00b6 \u5982\u679c\u4f60\u60f3\u8981\u4f60\u7684\u8bbe\u5907\u652f\u6301\u5b9e\u65f6\u6a21\u5f0f\uff0c\u9700\u8981\u5b9e\u73b0\u4ee5\u4e0b\u5185\u5bb9\uff1a \u8bbe\u5907\u9700\u8981\u8fd0\u884c\u4e00\u4e2a\u53ef\u4ee5\u4f7f\u7528\u4e32\u53e3\u3001\u84dd\u7259\u6216\u4ee5\u592a\u7f51\u63a5\u53e3\u901a\u8baf\u63a7\u5236\u7684\u56fa\u4ef6\uff0c\u6bd4\u5982Firmata\u3002 \u5728\u8bbe\u5907index.js\u6587\u4ef6\u4e2d\u5bf9\u5e94\u79ef\u6728\u7684handle\u51fd\u6570\u4e2d\u8c03\u7528\u901a\u8baf\u534f\u8bae\u6536\u53d1\u63a7\u5236\u63a7\u5236\u677f\u72b6\u6001\u3002 \u5728scratch-HW\u7684Arduino\u6846\u67b6\u4e0b\uff0c\u6211\u4eec\u4f7f\u7528\u6807\u51c6Firmata\u56fa\u4ef6\u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\uff0c \u4e0b\u9762\u4ee5Arduino UNO\u7684\u6784\u67b6\u4e3e\u4f8b\u8bf4\u660e\u3002 \u540c\u6837\u7684\u5728\u5305\u542b\u5b9e\u65f6\u6a21\u5f0f\u4e0b\u7684\u4ee3\u7801\u4e2d\uff0c\u4ecd\u7136\u5206\u4e3a\u4e24\u4e2a\u5c42\uff0c\u4e00\u4e2a\u8d1f\u8d23\u5e95\u5c42\u534f\u8bae\u7684\u901a\u8baf\uff0c\u53e6\u4e00\u4e2a\u8d1f\u8d23\u6839\u636e\u5bf9\u5e94\u79ef\u6728\u7684\u529f\u80fd\u8c03\u7528\u524d\u8005\u529f\u80fd\u5b8c\u6210\u5bf9\u5e94\u64cd\u4f5c\u3002 /** * Set pin mode. * @param {object} args - the block's arguments. * @return {Promise} - a Promise that resolves after the set pin mode is done. */ setPinMode ( args ) { this . _peripheral . setPinMode ( args . PIN , args . MODE ); return new Promise ( resolve => { setTimeout (() => { resolve (); }, SerialportSendInterval ); }); } \u5728\u79ef\u6728\u903b\u8f91\u5c42\uff0csetPinMode\u51fd\u6570\u8c03\u7528\u4e86\u534f\u8bae\u901a\u8baf\u5c42\u65b9\u6cd5\uff0c\u5e76\u8fd4\u56de\u4e86\u4e00\u4e2aPromise\uff0c\u8be5Promise\u5728\u5ef6\u65f6SerialportSendInterval(=5) ms\u540e\u88abresolve()\uff0c\u4ee5\u8fd9\u6837\u7684\u65b9\u5f0f\u5f02\u6b65\u5ef6\u65f6\u4e00\u6bb5\u65f6\u95f4\uff0c\u8ba9\u534f\u8bae\u5c42\u5b8c\u6210\u53d1\u9001\uff0c\u9650\u5236\u6307\u4ee4\u53d1\u9001\u901f\u7387\u9632\u6b62\u963b\u585e\u3002 /** * @param {PIN} pin - the pin to set. * @param {MODE} mode - the pin mode to set. * @return {Promise} - a Promise that resolves when writing to peripheral. */ setPinMode ( pin , mode ) { pin = this . parsePin ( pin ); switch ( mode ) { case Mode . Input : mode = this . _firmata . MODES . INPUT ; break ; case Mode . Output : mode = this . _firmata . MODES . OUTPUT ; break ; case Mode . InputPullup : mode = this . _firmata . MODES . PULLUP ; break ; } return this . _firmata . pinMode ( pin , mode ); } \u5728\u534f\u8bae\u94fe\u8def\u5c42\u7684\u8fd9\u4e2a\u51fd\u6570\u4e2d\uff0c\u5b83\u8c03\u7528\u4e86firmata \u5e93\u4e2d\u7684\u65b9\u6cd5\uff0c\u5411\u8bbe\u5907\u53d1\u9001\u4e86firmata\u6307\u4ee4\u3002 \u4e86\u89e3\u66f4\u591afirmata\u7684\u5185\u5bb9\u548c\u51fd\u6570\u65b9\u6cd5\uff0c\u8bf7\u53c2\u8003 firmata.js \u3002 \u6dfb\u52a0\u8bbe\u5907\u5230extension manager \u00b6 \u5728 scratchhw-vm\\src\\extension-support\\extension-manager.js \u884c\u657032\uff0c\u5c06\u4f60\u7684\u65b0\u7684\u8bbe\u5907index\u6587\u4ef6\u5728\u5217\u8868\u4e2d\u52a0\u5165\u3002 const builtinDevices = { arduinoUno : () => require ( '../devices/arduinoUno' ), arduinoNano : () => require ( '../devices/arduinoNano' ) < board id >: () => require ( '../devices/<board name>' ) }; \u5728\u5b8c\u6210\u8fd9\u4e2a\u6b65\u9aa4\u540e\uff0c\u5df2\u7ecf\u53ef\u4ee5\u5c1d\u8bd5\u5728GUI\u4e2d\u9009\u62e9\u52a0\u8f7d\u8fd9\u4e2a\u8bbe\u5907\u4e86\uff0c\u4f60\u770b\u5230\u8bbe\u5907\u5bf9\u5e94\u7684\u79ef\u6728\u51fa\u73b0\u5728\u5de5\u5177\u680f\u4e2d\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u5c06\u4ed6\u4eec\u62d6\u52a8\u8fdb\u5165\u5de5\u4f5c\u533a\uff0c\u4f46\u662f\u5982\u679c\u4f60\u662f\u5728\u7f16\u7a0b\u6a21\u5f0f\u4e0b\uff0c\u6b64\u65f6\u5e76\u4e0d\u4f1a\u6709\u5bf9\u5e94\u7684\u4ee3\u7801\u5728\u53f3\u4fa7\u4ee3\u7801\u533a\u751f\u6210\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u518dscratchhw-blocks\u4e2d\u6dfb\u52a0\u8bbe\u5907\u79ef\u6728\u5bf9\u5e94\u7684\u4ee3\u7801\u8f6c\u8bd1\u51fd\u6570\u3002 \u5728scratchhw-blocks\u4e2d\u6dfb\u52a0\u4ee3\u7801\u8f6c\u8bd1\u51fd\u6570 \u00b6 \u6ce8\u610f \uff1a\u7531\u4e8escratchhw-blocks\u5728\u63d0\u4f9b\u7ed9gui\u548cvm\u65f6\u7ecf\u8fc7\u4e86google-closure-compiler\u7f16\u8bd1\u751f\u6210\u540e\u624d\u88abwebpack\u6253\u5305\uff0c\u5728\u8fd9\u4e2a\u90e8\u5206\u4e2d\u7684\u4fee\u6539\u5e76\u4e0d\u4f1a\u88abwebpack\u81ea\u52a8\u63a2\u6d4b\u7f16\u8bd1\uff0c\u6240\u4ee5\u5728\u4fee\u6539\u8fd9\u90e8\u5206\u4ee3\u7801\u540e\u9700\u8981\u5728scratchhw-blocks\u4e0b\u8fd0\u884cnpm run prepublish\u91cd\u65b0\u7f16\u8bd1\u6253\u5305\uff0c\u5e76\u91cd\u542fgui\u7684webpack\u670d\u52a1\u5668\uff0c\u5373\u9000\u51fagui\u4e0b\u8fd0\u884c\u7684\u6307\u4ee4\uff0c\u5e76\u91cd\u65b0\u8fd0\u884c npm run start \u6216 npm run start-open \u3002 \u76ee\u524dArduino\u8bbe\u5907\u5bf9\u5e94\u7684\u8f6c\u7801\u51fd\u6570\u9700\u8981\u6dfb\u52a0\u5728 scratchhw-blocks\\generators\\arduino\\arduino.js \u4e2d\u3002 \u4e0b\u9762\u4ee5 setDigitalOutput \u79ef\u6728\u7684\u4ee3\u7801\u8f6c\u8bd1\u51fd\u6570\u4e3a\u4f8b\u3002 Blockly . Arduino [ 'pin_setDigitalOutput' ] = function ( block ) { var arg0 = block . getFieldValue ( 'PIN' ) || '0' ; var arg1 = Blockly . Arduino . valueToCode ( block , 'LEVEL' , Blockly . Arduino . ORDER_UNARY_POSTFIX ) || 'LOW' ; var code = \"digitalWrite(\" + arg0 + \", \" + arg1 + \");\\n\" ; return code ; }; \u663e\u7136\u8fd9\u4e2a\u51fd\u6570\u7684\u540d\u79f0\u4e0evm\u4e2d\u5bf9\u5e94\u79ef\u6728\u7684opcode\u4e0d\u540c\uff0c\u8fd9\u662f\u56e0\u4e3a\u5728vm\u4e2d\uff0c\u662f\u901a\u8fc7\u4e00\u4e9b\u51fd\u6570\u5904\u7406\u624d\u751f\u4ea7\u4e86blocks\u4e2d\u5b9a\u4e49\u79ef\u6728\u7684\u7ed3\u6784\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u79ef\u6728\u7684id\u662f\u7531 ${categoryInfo.id}_${blockInfo.opcode} \u7ec4\u6210\u7684\uff0c\u5373\u76ee\u5f55id\u548c\u79ef\u6728id\u5171\u540c\u6784\u6210\u3002\u6240\u4ee5pin\u76ee\u5f55\u4e0b\u7684setDigitalOutput\u79ef\u6728\u7684id\u5c31\u53d8\u6210\u4e86 pin_setDigitalOutput \u3002 \u8fd8\u6709\u4e00\u70b9\u7279\u522b\u7684\u662f\uff0c\u5982\u679c\u79ef\u6728\u83dc\u5355\u5b9a\u4e49\u4e86 acceptReporters: true \u5c5e\u6027\uff0c\u90a3\u4e48\u5176\u503c\u65e2\u53ef\u4ee5\u4e0b\u62c9\u83dc\u5355\u9009\u62e9\uff0c\u4e5f\u53ef\u4ee5\u88ab\u653e\u7f6e\u5165\u7684\u79ef\u6728\u8986\u76d6\uff0c\u5728\u6ca1\u6709\u79ef\u6728\u653e\u5165\u65f6\u5176\u4e0b\u62c9\u83dc\u5355\u7684\u503c\u4f1a\u88ab\u89c6\u4e3a\u662f\u4e00\u4e2a\u65b0\u7684\u79ef\u6728\u3002\u5176id\u751f\u6210\u89c4\u5219\u4e3a ${categoryInfo}_menu_${xmlEscape(menuName)} \uff0c\u5373\u76ee\u5f55\u540d\u79f0+menu+\u83dc\u5355\u540d\u79f0\u3002\u6240\u4ee5setDigitalOutput\u79ef\u6728\u7684level\u83dc\u5355\u5c31\u9700\u8981\u5b9a\u4e49\u4e3a pin_menu_level \uff0c\u624d\u80fd\u5728\u6ca1\u6709\u79ef\u6728\u653e\u7f6e\u8fdb\u5165\u65f6\u6b63\u786e\u89e3\u6790\u3002 Blockly . Arduino [ 'pin_menu_level' ] = function ( block ) { var code = block . getFieldValue ( 'level' ) || 'LOW' ; return [ code , Blockly . Arduino . ORDER_ATOMIC ]; }; \u66f4\u591a\u7684\u4ee3\u7801\u8f6c\u8bd1\u51fd\u6570\u7684\u7f16\u5199\u5185\u5bb9\u548c\u673a\u5236\u53c2\u8003\uff1a \u4ee3\u7801\u751f\u6210\u5668 \u3002 \u5feb\u901f\u8c03\u8bd5 \u7531\u4e8escratchhw-blocks\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u6253\u5305\u7684\u95ee\u9898\uff0c\u4f7f\u5f97\u5176\u8c03\u8bd5\u8fc7\u7a0b\u53ca\u5176\u7e41\u7410\uff0c\u6211\u4eec\u53ef\u4ee5\u5728GUI\u4e2d\u5bfc\u5165scratchhw-blocks\u7684\u4f4d\u7f6e\u5bf9\u5176\u51fd\u6570\u91cd\u5199\uff0c\u6765\u5b9e\u73b0\u5feb\u901f\u8c03\u8bd5\u3002 \u5728 scratchhw-gui\\src\\lib\\blocks.js \u4e2d\uff0c scratchhw-blocks \u88ab\u5bfc\u5165\u4e3a ScratchBlocks \u6211\u4eec\u76f4\u63a5\u5728\u8fd9\u4e2a\u6587\u4ef6\u7684export default function\u4e2d\u6dfb\u52a0\u60f3\u8981\u8c03\u8bd5\u7684\u8f6c\u8bd1\u51fd\u6570\uff0c\u5bf9ScratchBlocks\u7684\u5185\u5bb9\u8fdb\u884c\u8865\u5145\u6216\u91cd\u5199\uff0c\u4e0d\u8fc7\u6ce8\u610f\u8fd9\u91cc\u5934\u90e8\u7684 Blockly \u53d8\u91cf\u8981\u6539\u540d\u4e3a ScratchBlocks \u3002 /** * Connect scratch blocks with the vm * @param {VirtualMachine} vm - The scratch vm * @return {ScratchBlocks} ScratchBlocks connected with the vm */ export default function ( vm ) { //... ScratchBlocks . Arduino [ 'pin_setDigitalOutput' ] = function ( block ) { var arg0 = block . getFieldValue ( 'PIN' ) || '0' ; var arg1 = Blockly . Arduino . valueToCode ( block , 'LEVEL' , Blockly . Arduino . ORDER_UNARY_POSTFIX ) || 'LOW' ; var code = \"digitalWrite(\" + arg0 + \", \" + arg1 + \");\\n\" ; return code ; }; } \u5728\u8fd9\u91cc\u52a0\u5165\u7684\u8f6c\u8bd1\u51fd\u6570\u7684\u6548\u679c\u4e0escratchhw-blocks\u4e2d\u6dfb\u52a0\u6548\u679c\u662f\u4e00\u6837\u7684\u3002\u5728\u5b8c\u6210\u529f\u80fd\u8c03\u8bd5\u540e\uff0c\u6211\u4eec\u518d\u5c06\u6b63\u786e\u7684\u4ee3\u7801\u79fb\u52a8\u5230scratchhw-blocks\u4e2d\uff0c\u5c06 ScratchBlocks \u66ff\u6362\u56de Blockly \uff0c\u5e76\u5c06blocks.js\u6587\u4ef6\u6062\u590d\u5373\u53ef\u3002","title":"\u5982\u4f55\u6dfb\u52a0\u65b0\u7684\u8bbe\u5907"},{"location":"software-developer-reference/how-to-add-a-new-device/#_1","text":"","title":"\u5982\u4f55\u6dfb\u52a0\u65b0\u7684\u8bbe\u5907"},{"location":"software-developer-reference/how-to-add-a-new-device/#_2","text":"\u5728Scratch-HW\u4e2d\u8bbe\u5907\u5c31\u662f\u5728\u6307\u63a7\u5236\u677f\u5982\uff1aArduino UNO\u3001Arduino Nano\u7b49\u3002 \u6ce8\u610f \uff1a\u5728\u5f00\u542f\u5728scratchhw-gui\u7684webpack\u670d\u52a1\u5668\u65f6\uff0c\u5bf9\u6b64\u6587\u4ef6\u4e2d\u7684\u6539\u52a8\u4f1a\u81ea\u52a8\u89e6\u53d1webpack\u91cd\u65b0\u7f16\u8bd1\u6253\u5305\uff0c\u6240\u4ee5\u4fee\u6539\u6587\u4ef6\u6216\u4ee3\u7801\u540e\u76f4\u63a5\u4fdd\u5b58\u5373\u53ef\u67e5\u770b\u6548\u679c\uff0c\u4e0d\u9700\u8981\u91cd\u65b0\u542f\u52a8webpack\uff08\u5373\u91cd\u65b0\u6267\u884c npm run start-open \u6216 npm run start \u6307\u4ee4 \uff09\u3002","title":"\u7b80\u4ecb"},{"location":"software-developer-reference/how-to-add-a-new-device/#scratchhw-gui","text":"\u6839\u636e\u4ee5\u4e0b\u53c2\u6570\u4e0e\u793a\u4f8b\u5236\u4f5c\u63a7\u5236\u677f\u7684\u56fe\u7247\uff0c\u8bf7\u786e\u4fdd\u5728\u5468\u56f4\u7559\u6709\u76d2\u9002\u5bbd\u5ea6\u7684\u767d\u8272\u8fb9\u7f18\u3002 \u8fd9\u4e2a\u56fe\u7247\u5c06\u7528\u4e8e\u663e\u793a\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u4e2d\u3002 \u683c\u5f0f \uff1apng \u5206\u8fa8\u7387 \uff1a600x372 \u80cc\u666f\u8272 \uff1a\u767d\u8272 \u4f60\u53ef\u4ee5\u76f4\u63a5\u4fdd\u5b58\u4e0b\u9762\u8fd9\u4e2a\u56fe\u7247\u6765\u53c2\u8003\u5236\u4f5c\uff0c\u5728\u5b8c\u6210\u540e\u4ee5\u9a7c\u5cf0\u89c4\u5219\u547d\u540d\u8fd9\u4e2a\u56fe\u7247\u6587\u4ef6\uff0c\u5982\uff1a`arduinoUno.png \u7531\u524d\u4e0a\u4e00\u6b65\u5236\u4f5c\u7684\u56fe\u7247\u5236\u4f5csvg\u56fe\u3002\u8fd9\u6b65\u5236\u4f5c\u7684\u4e24\u4e2a\u56fe\u7247\u5c06\u7528\u4e8e\u5728\u8fde\u63a5\u8bbe\u5907\u65f6\u663e\u793a\u3002 \u5c06\u63a7\u5236\u677f\u4e3b\u4f53\u6263\u51fa\u5220\u9664\u56fe\u7247\u7684\u80cc\u666f\uff0c\u5c06\u56fe\u7247\u957f\u5bbd\u6bd4\u8c03\u6574\u4e3a108\uff1a87\uff0c\u63a7\u5236\u677f\u8981\u5c3d\u53ef\u80fd\u7684\u8d34\u8fd1\u56fe\u7247\u8fb9\u7f18\uff0c\u51cf\u5c0f\u7a7a\u767d\uff0c\u800c\u540e\u4fdd\u5b58\u4e3apng\u683c\u5f0f\u3002\u800c\u540e\u5c06\u56fe\u7247\u4ee5\u540c\u6837\u7684\u8981\u6c42\u8c03\u6574\u957f\u5bbd\u6bd4\u4e3a1\uff1a1\uff0c\u518d\u6b21\u4fdd\u5b58\u3002 \u8bbf\u95ee\u8fd9\u4e2a\u5728\u7ebf\u683c\u5f0f\u8f6c\u6362\u7684\u7f51\u7ad9\uff1a aconvert.com \u3002\u5c06\u521a\u521a\u5236\u4f5c\u597d\u7684\u4e24\u5f20\u56fe\u7247\u4e0a\u4f20\u8f6c\u6362\u4e3aSVG\u683c\u5f0f\uff0c\u8bb0\u4f4f\u8981\u9009\u62e9**Resize image**\u9009\u9879\uff0c\u5c06\u5176\u5206\u522b\u8bbe\u7f6e\u4e3a 108x87**\u548c**40x40 \u3002 \u4fdd\u5b58108x87 \u7684\u56fe\u7247\u540d\u79f0\u4e3a\uff1a <board name>-illustration.svg \uff0c\u5982\uff1a arduinoUno-illustration.svg \u4fdd\u5b5840x40\u7684\u56fe\u7247\u540d\u79f0\u4e3a\uff1a <board name>-small.svg \uff0c\u5982 : arduinoUno-small.svg \u5c06\u5236\u4f5c\u597d\u7684\u4e09\u5f20\u56fe\u7247\u653e\u7f6e\u5230\u4ee5\u63a7\u5236\u677f\u7684\u540d\u79f0\u547d\u540d\u7684\u6587\u4ef6\u5939\u4e2d\uff0c\u5982\uff1a arduinoUno \uff0c\u5c06\u5176\u79fb\u52a8\u5230\u8def\u5f84 scratchhw-gui\\src\\lib\\libraries\\devices\\ \u4e0b\u3002 \u5b8c\u6210\u540e\u6587\u4ef6\u6811\u7ed3\u6784\u5c06\u5982\u4e0b\u6240\u793a\uff1a scratchhw-gui \\s rc \\l ib \\l ibraries \\d evices \\ | - arduinoLeonardo \\ | - arduinoMega2560 \\ | - baseToolbox \\ | - ... | - <board name> \\ | - <board name>.png | - <board name>-illustration.svg | - <board name>-small.svg | - index.jsx \u4fee\u6539 index.jsx \u3002 \u5728 scratchhw-gui\\src\\lib\\libraries\\devices\\index.jsx \u6587\u4ef6\u4e2d\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u6709\u4e00\u4e9b\u8bbe\u5907\u7684\u4ee3\u7801\u5728\u8fd9\u91cc\u4e86\uff0c\u6211\u4ee5Arduino UNO\u7684\u53c2\u6570\u4e3e\u4f8b\u3002 \u9996\u5148\uff0cimport \u8d44\u6e90\u56fe\u7247\u3002 import arduinoUnoIconURL from './arduinoUno/arduinoUno.png' ; import arduinoUnoConnectionIconURLL from './arduinoUno/arduinoUno-illustration.svg' ; import arduinoUnoConnectionSmallIconURL from './arduinoUno/arduinoUno-small.svg' ; \u800c\u540e\u8bbe\u7f6e\u8bbe\u5907\u3002 { name : 'Arduino Uno' , deviceId : 'arduinoUno' , collaborator : 'arduino' , type : 'arduino' , iconURL : arduinoUnoIconURL , description : ( < FormattedMessage defaultMessage = \"The best board to get started with electronics and coding.\" description = \"Description for the Arduino Uno device\" id = \"gui.device.arduinoUno.description\" /> ), featured : true , disabled : false , bluetoothRequired : false , serialportRequired : true , internetConnectionRequired : false , launchPeripheralConnectionFlow : true , useAutoScan : false , connectionIconURL : arduinoUnoConnectionIconURLL , connectionSmallIconURL : arduinoUnoConnectionSmallIconURL , connectingMessage : ( < FormattedMessage defaultMessage = \"Connecting\" description = \"Message to help people connect to their arduino.\" id = \"gui.device.arduino.connectingMessage\" /> ), baseToolBoxXml : arduinoBaseToolBox , programMode : [ 'realtime' , 'upload' ], programLanguage : [ 'block' , 'c' , 'cpp' ], helpLink : 'https://store.arduino.cc/usa/arduino-uno-rev3' } * \u661f\u53f7\u4ee3\u8868\u8fd9\u4e2a\u53c2\u6570\u662f\u5fc5\u987b\u7684 name* \u8bbe\u5907\u663e\u793a\u7684\u540d\u79f0\u3002 deviceId* \u8bbe\u5907ID\uff0c\u5c06\u88ab\u5728scratchhw-vm\u52a0\u8f7d\u8bbe\u5907\u65f6\u4f7f\u7528\u3002 collaborator \u8fd9\u4e2a\u5c06\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u4e2d\u7684\u5408\u4f5c\u8005\u6761\u76ee\u4e2d\u663e\u793a\u3002 type* \u544a\u8bc9GUI\u8be5\u4f7f\u7528\u54ea\u4e2a\u4ee3\u7801\u751f\u6210\u5668\u3002 iconURL* \u5c06\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u4e2d\u663e\u793a\u3002 description \u5c06\u4f1a\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u7684iconURL\u4e0b\u65b9\u663e\u793a\uff0c\u8fd9\u91cc\u4f7f\u7528\u4e86FormattedMessage\u6765\u63d0\u4f9b\u591a\u79cd\u8bed\u8a00\u4e0b\u7684\u4e0d\u540c\u7ffb\u8bd1\u5185\u5bb9\u3002 featured* \u8fd9\u662f\u4e00\u4e2a\u5185\u90e8\u53c2\u6570\uff0c\u4ed6\u59cb\u7ec8\u5e94\u8be5\u88ab\u8bbe\u7f6e\u4e3atrue\u3002 disabled \u5982\u679c\u8bbe\u7f6e\u4e3atrue\uff0c\u5c06\u4f1a\u7981\u7528\u8fd9\u4e2a\u8bbe\u5907\u9009\u9879\uff0c\u5c06\u663e\u793a\u4e3a\u7070\u8272\u5e76\u65e0\u6cd5\u88ab\u9009\u53d6\u3002 bluetoothRequired/serialportRequired/internetConnectionRequired \u8bbe\u7f6e\u4e3atrue\u5c06\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u8981\u6c42\u680f\u4e2d\u663e\u793a\u5bf9\u5e94\u8fde\u63a5\u7684\u56fe\u6807\uff0c\u8fd9\u51e0\u4e2a\u53c2\u6570\u53ea\u7528\u4e8e\u663e\u793a\u56fe\u6807\u4e0d\u4f1a\u5f71\u54cd\u5b9e\u9645\u7684\u8fde\u63a5\u529f\u80fd\u3002 launchPeripheralConnectionFlow* \u8bbe\u7f6e\u4e3atrue\u4f1a\u5728\u9009\u62e9\u8bbe\u5907\u540e\u5f00\u542f\u8bbe\u5907\u8fde\u63a5\u754c\u9762\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3atrue\u3002 useAutoScan \u8bbe\u7f6e\u4e3atrue\uff0c\u5c06\u4f1a\u81ea\u52a8\u8fde\u63a5\u626b\u63cf\u51fa\u7684\u8bbe\u5907\uff0c\u4e0d\u5efa\u8bae\u5f00\u542f\u3002 connectionIconURL* \u5c06\u7528\u4e8e\u5728\u8bbe\u5907\u8fde\u63a5\u754c\u9762\u4e2d\u663e\u793a\u3002 connectionSmallIconURL* \u5c06\u663e\u793a\u5728\u8bbe\u5907\u8fde\u63a5\u754c\u9762\u7684\u9876\u90e8\u680f\u4e2d\u3002 connectingMessage* \u8fd9\u4e2a\u4fe1\u606f\u5c06\u5728\u8bbe\u5907\u8fde\u63a5\u65f6\u663e\u793a\uff0c\u4e0d\u5efa\u8bae\u4fee\u6539\u6b64\u5185\u5bb9\u3002 baseToolBoxXml* \u63d0\u4f9b\u8bbe\u5907\u7684\u57fa\u7840\u79ef\u6728\u5185\u5bb9\uff0c\u4e0d\u5efa\u8bae\u4fee\u6539\u3002 programMode* \u5728\u8bbe\u5907\u4e0d\u652f\u6301\u5bf9\u5e94\u7684\u7f16\u7a0b\u6a21\u5f0f\u65f6\uff0c\u4f1a\u81ea\u52a8\u5207\u6362\u5230\u652f\u6301\u7684\u6a21\u5f0f\u5e76\u9501\u5b9a\u6a21\u5f0f\u5207\u6362\u5f00\u5173\u3002\u540c\u65f6\u4e5f\u63a7\u5236\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u4e2d\u7f16\u7a0b\u6a21\u5f0f\u680f\u4e2d\u7684\u663e\u793a\u3002 programLanguage* \u4ec5\u7528\u4e8e\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u4e2d\u7f16\u7a0b\u8bed\u8a00\u680f\u4e2d\u63a7\u5236\u56fe\u6807\u663e\u793a\u3002 helpLink \u5c06\u7528\u4e8e\u8bbe\u5907\u8fde\u63a5\u754c\u9762\u4e2d\uff0c\u70b9\u51fb\u8be5\u754c\u9762\u4e2d\u7684\u5e2e\u52a9\u6309\u94ae\u5c31\u4f1a\u6253\u5f00\u8fd9\u4e2a\u94fe\u63a5\u3002 \u5728\u5b8c\u6210\u8fd9\u4e9b\u5de5\u4f5c\u540e\uff0c\u4f60\u5e94\u8be5\u80fd\u591f\u5728\u8bbe\u5907\u9009\u62e9\u754c\u9762\u4e2d\u770b\u5230\u65b0\u6dfb\u52a0\u7684\u8bbe\u5907\u4e86\uff0c\u4f46\u662f\u5982\u679c\u6211\u4eec\u70b9\u51fb\u5b83\uff0c\u4ec0\u4e48\u90fd\u4e0d\u4f1a\u53d1\u9001\uff0c\u6211\u4eec\u4ecd\u9700\u8981\u5728scratchhw-vm\u4e2d\u6dfb\u52a0\u8bbe\u5907\u7684\u4ee3\u7801\u3002","title":"\u5728scratchhw-gui\u6dfb\u52a0\u8bbe\u5907\u56fe\u7247\u548c\u914d\u7f6e"},{"location":"software-developer-reference/how-to-add-a-new-device/#scratchhw-vm","text":"","title":"\u5728scratchhw-vm\u4e2d\u6dfb\u52a0\u8bbe\u5907\u4ee3\u7801"},{"location":"software-developer-reference/how-to-add-a-new-device/#_3","text":"\u6ce8\u610f \uff1a\u7531\u4e8e\u76ee\u524d\u53ea\u5b8c\u6210\u4e86Arduino\u8bbe\u5907\u7684\u5185\u5bb9\uff0c\u6240\u4ee5\u4ee5\u4e0b\u5185\u5bb9\u4ec5\u9002\u7528\u4e8eArduino\u8bbe\u5907\uff0c\u5176\u4ed6\u7c7b\u578b\u7684\u8bbe\u5907\u5c06\u5728\u4e4b\u540e\u88ab\u6dfb\u52a0\u3002 \u5728 scratchhw-vm\\src\\devices \u8def\u5f84\u4e0b\u521b\u5efa\u4e00\u65b0\u7684\u6587\u4ef6\u5939\uff0c\u547d\u540d\u4e3a\u63a7\u5236\u677f\u7684\u540d\u79f0\uff0c\u5982\uff1a arduinoUno \u3002\u590d\u5236 src\\devices\\arduinoUno\\index.js \u5230\u8fd9\u4e2a\u65b0\u7684\u6587\u4ef6\u5939\u4e2d\uff0c\u5b8c\u6210\u540e\u6587\u4ef6\u6811\u7ed3\u6784\u5c06\u5982\u4e0b\u6240\u793a\uff1a scratchhw-vm\\src\\devices\\ |- arduinoLeonardo\\ |- arduinoMega2560\\ |- ... |- <board name>\\ |- index.js \u73b0\u5728\u6211\u4eec\u6765\u5f00\u59cb\u4fee\u6539index.js\u6587\u4ef6\u3002 \u5728\u6587\u4ef6\u4e2d\uff0c\u6ce8\u91ca\u4ee3\u7801\u7684\u6ce8\u91ca\u90fd\u5df2\u7ecf\u5f88\u8be6\u7ec6\u4e86\uff0c\u4e0b\u9762\u4ec5\u4ecb\u7ecd\u4f60\u9700\u8981\u4fee\u6539\u7684\u5185\u5bb9\u90e8\u5206\uff0c\u548c\u6587\u4ef6\u6846\u67b6\u7ed3\u6784\u3002 \u8fd9\u4e2a\u6587\u4ef6\u4e2d\u5206\u4e24\u4e2aClass\uff0c ArduinoUno \u4e0e Scratch3ArduinoUnoDevice \uff0c\u524d\u8005\u8d1f\u8d23\u5b9e\u73b0\u4e0e\u786c\u4ef6\u7684\u63a5\u53e3\u901a\u8baf\u7b49\u5185\u5bb9\uff0c\u540e\u8005\u7528\u4e8e\u5b9e\u73b0\u8bbe\u5907\u7684\u79ef\u6728\u5757\u5185\u5bb9\uff0c\u540c\u65f6\u4f1a\u8c03\u7528\u524d\u8005\uff0c\u901a\u8fc7\u524d\u8005\u7684\u63a5\u53e3\u51fd\u6570\u79ef\u6728\u5f00\u5728\u5b9e\u65f6\u6a21\u5f0f\u4e0b\u7684\u529f\u80fd\u4ee3\u7801\u3002 PID/VID\u8fc7\u6ee4\u5668 /* A list of USB device filters. If include '*' means disable the filter */ const PNPID_LIST = [ //https://github.com/arduino/Arduino/blob/1.8.0/hardware/arduino/avr/boards.txt#L51-L58 'USB\\\\VID_2341&PID_0043' , 'USB\\\\VID_2341&PID_0001' , 'USB\\\\VID_2A03&PID_0043' , 'USB\\\\VID_2341&PID_0243' , // For chinese clones that use CH340 'USB\\\\VID_1A86&PID_7523' // Uncomment this to close filter // '*' ]; \u8fd9\u4e2a\u5217\u8868\u5c06\u4f1a\u63a7\u5236scratchhw-link\u8fc7\u6ee4\u4e32\u53e3\u8bbe\u5907\uff0c\u9632\u6b62\u7528\u6237\u4e3a\u8ba1\u7b97\u673a\u4e0a\u81ea\u5e26\u7684\u4e32\u53e3\u6216\u5176\u4ed6\u4e0d\u76f8\u5173\u8bbe\u5907\u7684\u4e32\u53e3\u6240\u56f0\u60d1\u3002 \u8bbe\u5907\u53c2\u6570 /** * Configuration of build and flash. Used by arduino_debug and avrdude. * @readonly */ const DIVECE_OPT = { type : 'arduino' , board : 'arduino:avr:uno' , partno : 'atmega328p' } type \u53c2\u6570\u544a\u8bc9scratchhw-link\u4f7f\u7528\u90a3\u79cd\u7f16\u8bd1\u5668\u548c\u70e7\u5199\u8f6f\u4ef6\u6765\u63a5\u6536\u5904\u7406\u4e0a\u4f20\u8bf7\u6c42\u3002 board \u53c2\u6570\u7528\u4e8e\u63d0\u4f9b\u7ed9arduino_debug.exe\u3002\u8bbe\u5b9a\u8fd9\u4e2a\u53c2\u6570\u4e0e\u6211\u4eec\u5728Arduino IDE\u4e2d\u9009\u62e9\u63a7\u5236\u677f\u7c7b\u578b\u7684\u64cd\u4f5c\u672c\u8d28\u662f\u4e00\u6837\u7684\u3002 \u8bbf\u95ee Arduino manpage.adoc \u4e86\u89e3\u66f4\u591a\u53c2\u6570\u9009\u9879\u548c\u542b\u4e49\u3002 partno \u53c2\u6570\u7528\u63d0\u4f9b\u63a7\u5236\u677f\u7684MCU\u578b\u53f7\u7ed9avrdude\u3002\u8bbf\u95ee avrdude Option-Descriptions \u4e86\u89e3\u66f4\u591a\u53c2\u6570\u9009\u9879\u548c\u542b\u4e49\u3002 \u76ee\u5f55\u4e0e\u79ef\u6728 /** * @returns {Array.<object>} metadata for this extension and its blocks. */ getInfo () { return [ { // ... blocks : [ { // ... programMode : [ ProgramModeType . UPLOAD ] } ] //... }, { //... } ] } \u4e0e\u5e38\u89c4scratchhw-vm extension\u4e0d\u540c\u7684\u662f\uff0c\u6b64\u5904\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\u6570\u7ec4\uff0c\u5305\u542b\u591a\u4e2a\u76ee\u5f55\u3002\u5176\u4e2dprogramMode\u7528\u4e8e\u8bbe\u5b9a\u79ef\u6728\u652f\u6301\u7684\u7f16\u7a0b\u6a21\u5f0f\uff0c\u5982\u679c\u6ca1\u6709\u8bbe\u5b9a\u8fd9\u4e2a\u53c2\u6570\u5219\u9ed8\u8ba4\u90fd\u652f\u6301\u3002","title":"\u57fa\u7840\u529f\u80fd\u4ee3\u7801"},{"location":"software-developer-reference/how-to-add-a-new-device/#_4","text":"\u5982\u679c\u4f60\u60f3\u8981\u4f60\u7684\u8bbe\u5907\u652f\u6301\u5b9e\u65f6\u6a21\u5f0f\uff0c\u9700\u8981\u5b9e\u73b0\u4ee5\u4e0b\u5185\u5bb9\uff1a \u8bbe\u5907\u9700\u8981\u8fd0\u884c\u4e00\u4e2a\u53ef\u4ee5\u4f7f\u7528\u4e32\u53e3\u3001\u84dd\u7259\u6216\u4ee5\u592a\u7f51\u63a5\u53e3\u901a\u8baf\u63a7\u5236\u7684\u56fa\u4ef6\uff0c\u6bd4\u5982Firmata\u3002 \u5728\u8bbe\u5907index.js\u6587\u4ef6\u4e2d\u5bf9\u5e94\u79ef\u6728\u7684handle\u51fd\u6570\u4e2d\u8c03\u7528\u901a\u8baf\u534f\u8bae\u6536\u53d1\u63a7\u5236\u63a7\u5236\u677f\u72b6\u6001\u3002 \u5728scratch-HW\u7684Arduino\u6846\u67b6\u4e0b\uff0c\u6211\u4eec\u4f7f\u7528\u6807\u51c6Firmata\u56fa\u4ef6\u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\uff0c \u4e0b\u9762\u4ee5Arduino UNO\u7684\u6784\u67b6\u4e3e\u4f8b\u8bf4\u660e\u3002 \u540c\u6837\u7684\u5728\u5305\u542b\u5b9e\u65f6\u6a21\u5f0f\u4e0b\u7684\u4ee3\u7801\u4e2d\uff0c\u4ecd\u7136\u5206\u4e3a\u4e24\u4e2a\u5c42\uff0c\u4e00\u4e2a\u8d1f\u8d23\u5e95\u5c42\u534f\u8bae\u7684\u901a\u8baf\uff0c\u53e6\u4e00\u4e2a\u8d1f\u8d23\u6839\u636e\u5bf9\u5e94\u79ef\u6728\u7684\u529f\u80fd\u8c03\u7528\u524d\u8005\u529f\u80fd\u5b8c\u6210\u5bf9\u5e94\u64cd\u4f5c\u3002 /** * Set pin mode. * @param {object} args - the block's arguments. * @return {Promise} - a Promise that resolves after the set pin mode is done. */ setPinMode ( args ) { this . _peripheral . setPinMode ( args . PIN , args . MODE ); return new Promise ( resolve => { setTimeout (() => { resolve (); }, SerialportSendInterval ); }); } \u5728\u79ef\u6728\u903b\u8f91\u5c42\uff0csetPinMode\u51fd\u6570\u8c03\u7528\u4e86\u534f\u8bae\u901a\u8baf\u5c42\u65b9\u6cd5\uff0c\u5e76\u8fd4\u56de\u4e86\u4e00\u4e2aPromise\uff0c\u8be5Promise\u5728\u5ef6\u65f6SerialportSendInterval(=5) ms\u540e\u88abresolve()\uff0c\u4ee5\u8fd9\u6837\u7684\u65b9\u5f0f\u5f02\u6b65\u5ef6\u65f6\u4e00\u6bb5\u65f6\u95f4\uff0c\u8ba9\u534f\u8bae\u5c42\u5b8c\u6210\u53d1\u9001\uff0c\u9650\u5236\u6307\u4ee4\u53d1\u9001\u901f\u7387\u9632\u6b62\u963b\u585e\u3002 /** * @param {PIN} pin - the pin to set. * @param {MODE} mode - the pin mode to set. * @return {Promise} - a Promise that resolves when writing to peripheral. */ setPinMode ( pin , mode ) { pin = this . parsePin ( pin ); switch ( mode ) { case Mode . Input : mode = this . _firmata . MODES . INPUT ; break ; case Mode . Output : mode = this . _firmata . MODES . OUTPUT ; break ; case Mode . InputPullup : mode = this . _firmata . MODES . PULLUP ; break ; } return this . _firmata . pinMode ( pin , mode ); } \u5728\u534f\u8bae\u94fe\u8def\u5c42\u7684\u8fd9\u4e2a\u51fd\u6570\u4e2d\uff0c\u5b83\u8c03\u7528\u4e86firmata \u5e93\u4e2d\u7684\u65b9\u6cd5\uff0c\u5411\u8bbe\u5907\u53d1\u9001\u4e86firmata\u6307\u4ee4\u3002 \u4e86\u89e3\u66f4\u591afirmata\u7684\u5185\u5bb9\u548c\u51fd\u6570\u65b9\u6cd5\uff0c\u8bf7\u53c2\u8003 firmata.js \u3002","title":"\u5b9e\u65f6\u6a21\u5f0f\u529f\u80fd\u4ee3\u7801"},{"location":"software-developer-reference/how-to-add-a-new-device/#extension-manager","text":"\u5728 scratchhw-vm\\src\\extension-support\\extension-manager.js \u884c\u657032\uff0c\u5c06\u4f60\u7684\u65b0\u7684\u8bbe\u5907index\u6587\u4ef6\u5728\u5217\u8868\u4e2d\u52a0\u5165\u3002 const builtinDevices = { arduinoUno : () => require ( '../devices/arduinoUno' ), arduinoNano : () => require ( '../devices/arduinoNano' ) < board id >: () => require ( '../devices/<board name>' ) }; \u5728\u5b8c\u6210\u8fd9\u4e2a\u6b65\u9aa4\u540e\uff0c\u5df2\u7ecf\u53ef\u4ee5\u5c1d\u8bd5\u5728GUI\u4e2d\u9009\u62e9\u52a0\u8f7d\u8fd9\u4e2a\u8bbe\u5907\u4e86\uff0c\u4f60\u770b\u5230\u8bbe\u5907\u5bf9\u5e94\u7684\u79ef\u6728\u51fa\u73b0\u5728\u5de5\u5177\u680f\u4e2d\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u5c06\u4ed6\u4eec\u62d6\u52a8\u8fdb\u5165\u5de5\u4f5c\u533a\uff0c\u4f46\u662f\u5982\u679c\u4f60\u662f\u5728\u7f16\u7a0b\u6a21\u5f0f\u4e0b\uff0c\u6b64\u65f6\u5e76\u4e0d\u4f1a\u6709\u5bf9\u5e94\u7684\u4ee3\u7801\u5728\u53f3\u4fa7\u4ee3\u7801\u533a\u751f\u6210\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u518dscratchhw-blocks\u4e2d\u6dfb\u52a0\u8bbe\u5907\u79ef\u6728\u5bf9\u5e94\u7684\u4ee3\u7801\u8f6c\u8bd1\u51fd\u6570\u3002","title":"\u6dfb\u52a0\u8bbe\u5907\u5230extension manager"},{"location":"software-developer-reference/how-to-add-a-new-device/#scratchhw-blocks","text":"\u6ce8\u610f \uff1a\u7531\u4e8escratchhw-blocks\u5728\u63d0\u4f9b\u7ed9gui\u548cvm\u65f6\u7ecf\u8fc7\u4e86google-closure-compiler\u7f16\u8bd1\u751f\u6210\u540e\u624d\u88abwebpack\u6253\u5305\uff0c\u5728\u8fd9\u4e2a\u90e8\u5206\u4e2d\u7684\u4fee\u6539\u5e76\u4e0d\u4f1a\u88abwebpack\u81ea\u52a8\u63a2\u6d4b\u7f16\u8bd1\uff0c\u6240\u4ee5\u5728\u4fee\u6539\u8fd9\u90e8\u5206\u4ee3\u7801\u540e\u9700\u8981\u5728scratchhw-blocks\u4e0b\u8fd0\u884cnpm run prepublish\u91cd\u65b0\u7f16\u8bd1\u6253\u5305\uff0c\u5e76\u91cd\u542fgui\u7684webpack\u670d\u52a1\u5668\uff0c\u5373\u9000\u51fagui\u4e0b\u8fd0\u884c\u7684\u6307\u4ee4\uff0c\u5e76\u91cd\u65b0\u8fd0\u884c npm run start \u6216 npm run start-open \u3002 \u76ee\u524dArduino\u8bbe\u5907\u5bf9\u5e94\u7684\u8f6c\u7801\u51fd\u6570\u9700\u8981\u6dfb\u52a0\u5728 scratchhw-blocks\\generators\\arduino\\arduino.js \u4e2d\u3002 \u4e0b\u9762\u4ee5 setDigitalOutput \u79ef\u6728\u7684\u4ee3\u7801\u8f6c\u8bd1\u51fd\u6570\u4e3a\u4f8b\u3002 Blockly . Arduino [ 'pin_setDigitalOutput' ] = function ( block ) { var arg0 = block . getFieldValue ( 'PIN' ) || '0' ; var arg1 = Blockly . Arduino . valueToCode ( block , 'LEVEL' , Blockly . Arduino . ORDER_UNARY_POSTFIX ) || 'LOW' ; var code = \"digitalWrite(\" + arg0 + \", \" + arg1 + \");\\n\" ; return code ; }; \u663e\u7136\u8fd9\u4e2a\u51fd\u6570\u7684\u540d\u79f0\u4e0evm\u4e2d\u5bf9\u5e94\u79ef\u6728\u7684opcode\u4e0d\u540c\uff0c\u8fd9\u662f\u56e0\u4e3a\u5728vm\u4e2d\uff0c\u662f\u901a\u8fc7\u4e00\u4e9b\u51fd\u6570\u5904\u7406\u624d\u751f\u4ea7\u4e86blocks\u4e2d\u5b9a\u4e49\u79ef\u6728\u7684\u7ed3\u6784\uff0c\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u79ef\u6728\u7684id\u662f\u7531 ${categoryInfo.id}_${blockInfo.opcode} \u7ec4\u6210\u7684\uff0c\u5373\u76ee\u5f55id\u548c\u79ef\u6728id\u5171\u540c\u6784\u6210\u3002\u6240\u4ee5pin\u76ee\u5f55\u4e0b\u7684setDigitalOutput\u79ef\u6728\u7684id\u5c31\u53d8\u6210\u4e86 pin_setDigitalOutput \u3002 \u8fd8\u6709\u4e00\u70b9\u7279\u522b\u7684\u662f\uff0c\u5982\u679c\u79ef\u6728\u83dc\u5355\u5b9a\u4e49\u4e86 acceptReporters: true \u5c5e\u6027\uff0c\u90a3\u4e48\u5176\u503c\u65e2\u53ef\u4ee5\u4e0b\u62c9\u83dc\u5355\u9009\u62e9\uff0c\u4e5f\u53ef\u4ee5\u88ab\u653e\u7f6e\u5165\u7684\u79ef\u6728\u8986\u76d6\uff0c\u5728\u6ca1\u6709\u79ef\u6728\u653e\u5165\u65f6\u5176\u4e0b\u62c9\u83dc\u5355\u7684\u503c\u4f1a\u88ab\u89c6\u4e3a\u662f\u4e00\u4e2a\u65b0\u7684\u79ef\u6728\u3002\u5176id\u751f\u6210\u89c4\u5219\u4e3a ${categoryInfo}_menu_${xmlEscape(menuName)} \uff0c\u5373\u76ee\u5f55\u540d\u79f0+menu+\u83dc\u5355\u540d\u79f0\u3002\u6240\u4ee5setDigitalOutput\u79ef\u6728\u7684level\u83dc\u5355\u5c31\u9700\u8981\u5b9a\u4e49\u4e3a pin_menu_level \uff0c\u624d\u80fd\u5728\u6ca1\u6709\u79ef\u6728\u653e\u7f6e\u8fdb\u5165\u65f6\u6b63\u786e\u89e3\u6790\u3002 Blockly . Arduino [ 'pin_menu_level' ] = function ( block ) { var code = block . getFieldValue ( 'level' ) || 'LOW' ; return [ code , Blockly . Arduino . ORDER_ATOMIC ]; }; \u66f4\u591a\u7684\u4ee3\u7801\u8f6c\u8bd1\u51fd\u6570\u7684\u7f16\u5199\u5185\u5bb9\u548c\u673a\u5236\u53c2\u8003\uff1a \u4ee3\u7801\u751f\u6210\u5668 \u3002 \u5feb\u901f\u8c03\u8bd5 \u7531\u4e8escratchhw-blocks\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\u6253\u5305\u7684\u95ee\u9898\uff0c\u4f7f\u5f97\u5176\u8c03\u8bd5\u8fc7\u7a0b\u53ca\u5176\u7e41\u7410\uff0c\u6211\u4eec\u53ef\u4ee5\u5728GUI\u4e2d\u5bfc\u5165scratchhw-blocks\u7684\u4f4d\u7f6e\u5bf9\u5176\u51fd\u6570\u91cd\u5199\uff0c\u6765\u5b9e\u73b0\u5feb\u901f\u8c03\u8bd5\u3002 \u5728 scratchhw-gui\\src\\lib\\blocks.js \u4e2d\uff0c scratchhw-blocks \u88ab\u5bfc\u5165\u4e3a ScratchBlocks \u6211\u4eec\u76f4\u63a5\u5728\u8fd9\u4e2a\u6587\u4ef6\u7684export default function\u4e2d\u6dfb\u52a0\u60f3\u8981\u8c03\u8bd5\u7684\u8f6c\u8bd1\u51fd\u6570\uff0c\u5bf9ScratchBlocks\u7684\u5185\u5bb9\u8fdb\u884c\u8865\u5145\u6216\u91cd\u5199\uff0c\u4e0d\u8fc7\u6ce8\u610f\u8fd9\u91cc\u5934\u90e8\u7684 Blockly \u53d8\u91cf\u8981\u6539\u540d\u4e3a ScratchBlocks \u3002 /** * Connect scratch blocks with the vm * @param {VirtualMachine} vm - The scratch vm * @return {ScratchBlocks} ScratchBlocks connected with the vm */ export default function ( vm ) { //... ScratchBlocks . Arduino [ 'pin_setDigitalOutput' ] = function ( block ) { var arg0 = block . getFieldValue ( 'PIN' ) || '0' ; var arg1 = Blockly . Arduino . valueToCode ( block , 'LEVEL' , Blockly . Arduino . ORDER_UNARY_POSTFIX ) || 'LOW' ; var code = \"digitalWrite(\" + arg0 + \", \" + arg1 + \");\\n\" ; return code ; }; } \u5728\u8fd9\u91cc\u52a0\u5165\u7684\u8f6c\u8bd1\u51fd\u6570\u7684\u6548\u679c\u4e0escratchhw-blocks\u4e2d\u6dfb\u52a0\u6548\u679c\u662f\u4e00\u6837\u7684\u3002\u5728\u5b8c\u6210\u529f\u80fd\u8c03\u8bd5\u540e\uff0c\u6211\u4eec\u518d\u5c06\u6b63\u786e\u7684\u4ee3\u7801\u79fb\u52a8\u5230scratchhw-blocks\u4e2d\uff0c\u5c06 ScratchBlocks \u66ff\u6362\u56de Blockly \uff0c\u5e76\u5c06blocks.js\u6587\u4ef6\u6062\u590d\u5373\u53ef\u3002","title":"\u5728scratchhw-blocks\u4e2d\u6dfb\u52a0\u4ee3\u7801\u8f6c\u8bd1\u51fd\u6570"},{"location":"software-developer-reference/how-to-add-a-new-extension/","text":"\u5982\u4f55\u6dfb\u52a0\u65b0\u7684\u8bbe\u5907\u6269\u5c55 \u00b6 \u6982\u8ff0 \u00b6 \u5728 scratch-HW \u4e2d devices extension \u662f\u4e3adevice\u8bbe\u5907\u63d0\u4f9b\u7684\u6269\u5c55\uff0c\u4e0d\u540c\u4e8escratch\u539f\u672c\u7684\u6269\u5c55\uff0cdevices extension\u4e0d\u4f1a\u88abwebpack\u6253\u5305\uff0c\u5b83\u662f\u7531\u4e00\u4e2a\u5916\u90e8\u7684\u6269\u5c55\u670d\u52a1\u5668\u63d0\u4f9b\u7684\uff0c\u5f53\u7136\u8fd9\u4e2a\u670d\u52a1\u5668\u53ef\u4ee5\u662f\u8fdc\u7a0b\u7684\u4e5f\u53ef\u4ee5\u662f\u672c\u5730\u7684\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6211\u4eec\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6269\u5c55\u7684\u52a8\u6001\u4fee\u6539\u548c\u52a0\u8f7d\u529f\u80fd\u4e86\u3002 \u5177\u4f53\u6b65\u9aa4 \u00b6 \u5728scratch-extension-server\\src\u4e0b\u590d\u5236dht11\u4e3a\u4e00\u4e2a\u65b0\u7684\u6587\u4ef6\u5939\uff0c\u5e76\u5c06\u5176\u6539\u540d\u4e3a\u4f60\u7684\u6269\u5c55\u7684\u540d\u5b57\u3002 index.js \u00b6 index.js\u6587\u4ef6\u7684\u5185\u5bb9\u63cf\u8ff0\u4e86\u6b64\u63d2\u4ef6\u7684\u540d\u79f0\uff0c\u7248\u672c\uff0c\u4f5c\u8005\u7b49\u663e\u793a\u5185\u5bb9\uff0c\u4e5f\u63cf\u8ff0\u4e86\u6b64\u63d2\u4ef6\u7684\u79ef\u6728\u6e32\u67d3\uff0c\u4ee3\u7801\u8f6c\u8bd1\u7b49\u51fd\u6570\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002\u4e0b\u9762\u4ee5dht11\u7684\u6587\u4ef6\u4e3e\u4f8b\u3002 const formatMessage = require ( 'format-message' ); var path = require ( 'path' ); const staticPath = path . relative ( __dirname + '/../../src' , __dirname ); const dht11 = { name : \"DHT11\" , extensionId : 'dht11' , version : \"1.0.0\" , supportDevice : [ 'arduinoUno' ], author : 'Yang' , iconURL : staticPath + '/asset/DTH11.png' , description : formatMessage ({ id : 'dht11.description' , default : 'DHT11 Temperature and humidity sensor module.' , description : 'Description description of dht11' }), featured : true , blocks : staticPath + '/blocks.js' , generator : staticPath + '/generator.js' , toolbox : staticPath + '/toolbox.xml' , msg : staticPath + '/msg.js' , location : 'local' , // or 'remote' link : 'https://www.baidu.com' , } module . exports = dht11 ; \u4ee5\u4e0b\u5e26\u6709\u661f\u53f7*\u7684\u53c2\u6570\u4e3a\u5fc5\u987b\u53c2\u6570 name* \u663e\u793a\u5728\u6269\u5c55\u9009\u62e9\u754c\u9762\u7684\u540d\u5b57 extensionId* \u6269\u5c55\u7684\u552f\u4e00ID version \u663e\u793a\u5728\u6269\u5c55\u9009\u62e9\u754c\u9762\u7684\u7248\u672c\u53f7 supportDevice* \u652f\u6301\u7684\u8bbe\u5907\uff0c\u6269\u5c55\u53ea\u4f1a\u9009\u62e9\u4e86\u5bf9\u5e94\u652f\u6301\u7684\u8bbe\u5907\u540e\u624d\u4f1a\u5728\u6269\u5c55\u9009\u62e9\u754c\u9762\u663e\u793a author \u663e\u793a\u5728\u6269\u5c55\u9009\u62e9\u754c\u9762\u7684\u4f5c\u8005\u540d\u5b57 iconURL* \u663e\u793a\u5728\u6269\u5c55\u9009\u62e9\u754c\u9762\u7684\u56fe\u7247\uff0c\u56fe\u7247\u6bd4\u4f8b\u548c\u50cf\u7d20\u53c2\u6570\u8bf7\u53c2\u7167DHT11\u6837\u4f8b\u4e2d\u7684\u4fee\u6539 description \u663e\u793a\u5728\u6269\u5c55\u9009\u62e9\u754c\u9762\u56fe\u7247\u4e0b\u65b9\u6269\u5c55\u4ecb\u7ecd\u5185\u5bb9 featured* \u6b64\u53c2\u6570\u4e3a\u5185\u90e8\u53c2\u6570\uff0c\u5fc5\u987b\u8bbe\u7f6e\u4e3atrue blocks* \u6269\u5c55\u7684\u79ef\u6728\u6e32\u67d3\u751f\u6210\u4ee3\u7801 generator* \u6269\u5c55\u7684\u79ef\u6728\u7684\u8f6c\u8f6c\u8bd1\u4ee3\u7801 toolbox* \u6269\u5c55\u7684\u5de5\u5177\u7bb1\u4ee3\u7801\uff0c\u63cf\u8ff0\u6269\u5c55\u5728\u754c\u9762\u5de6\u4fa7\u5de5\u5177\u7bb1\u4e2d\u7684\u663e\u793a\u548c\u6392\u5217\u65b9\u5f0f msg* \u6269\u5c55\u7684\u591a\u8bed\u8a00\u652f\u6301 location* \u53ea\u6709 local / remote \u4e24\u4e2a\u9009\u9879\uff0c\u7528\u6765\u6807\u8bc6\u6269\u5c55\u662f\u90e8\u7f72\u5728\u4e91\u7aef\u8fd8\u662f\u672c\u5730\uff0c\u5728\u76ee\u524d\u7684\u8c03\u8bd5\u7248\u4e2d\uff0c\u76f4\u63a5\u9ed8\u8ba4\u4e3alocal \u5373\u53ef link \u4f3c\u4e4e\u76ee\u524d\u8fd8\u6ca1\u6709\u4f7f\u7528 blocks.js \u00b6 \u6b64\u6587\u4ef6\u5b9a\u4e49\u4e86\u63d2\u4ef6\u5185\u90e8\u7684\u79ef\u6728\u7684\u6837\u5f0f\uff0c\u4ee5\u4e0b\u4e3aDHT\u6837\u677f\u7684\u4ee3\u7801\u7247\u6bb5\u3002 // src\\dht11\\blocks.js var color = '#28BFE6' ; Blockly . Blocks [ 'DHT_INIT' ] = { init : function () { this . jsonInit ({ \"message0\" : Blockly . Msg . DHT_INIT , \"args0\" : [{ \"type\" : \"input_value\" , \"name\" : \"no\" }, { \"type\" : \"field_dropdown\" , \"name\" : \"pin\" , \"options\" : [ [ '0' , '0' ], [ '1' , '1' ], [ '2' , '2' ], [ '3' , '3' ], [ '4' , '4' ], [ '5' , '5' ], [ '6' , '6' ], [ '7' , '7' ], [ '8' , '8' ], [ '9' , '9' ], [ '10' , '10' ], [ '11' , '11' ], [ '12' , '12' ], [ '13' , '13' ], [ 'A0' , 'A0' ], [ 'A1' , 'A1' ], [ 'A2' , 'A2' ], [ 'A3' , 'A3' ], [ 'A4' , 'A4' ], [ 'A5' , 'A5' ]] }, { \"type\" : \"field_dropdown\" , \"name\" : \"mode\" , \"options\" : [ [ 'dht11' , '11' ], [ 'dht21' , '21' ], [ 'dht22' , '22' ]] }], \"colour\" : color , \"extensions\" : [ \"shape_statement\" ] }); } }; // src\\dht11\\msg.js line 4 DHT_INIT : 'init dht %1 pin %2 mode %3' , \u4e00\u4e2a\u79ef\u6728\u5757\u7531\u4ee5\u4e0b\u53c2\u6570\u6784\u6210 message0 \uff1a \u200b \u79ef\u6728\u6574\u4f53\u663e\u793a\u5185\u5bb9\u7531message0\u5185\u5bb9\u51b3\u5b9a\uff0c\u7531\u4e8e\u8fd9\u91cc\u7531\u591a\u8bed\u8a00\u7ffb\u8bd1\u5185\u5bb9\uff0c\u6240\u4ee5\u8fd9\u91cc\u7684\u5185\u5bb9\u662f\u7531 msg.js \u4e2d\u5b9a\u4e49\u7684\uff0c\u53ef\u4ee5\u770b\u5230\u79ef\u6728\u4e2d\u7684\u53c2\u6570\u662f\u7531 %1 %2\u8fd9\u6837\u7684\u5f62\u5f0f\u5b9a\u4e49\u7684\u3002\u800c\u540e\u5176\u53c2\u6570\u7684\u5177\u4f53\u5185\u5bb9\u7531args0\u5b9a\u4e49\u7684\u6570\u7ec4\u5b9a\u4e49\u3002 args0 \u5c5e\u6027\uff1a type \u53ef\u9009\u503c\uff1a \u200b input_value \uff1a\u8f93\u5165\u6846\uff0c\u9ed8\u8ba4\u4e3a\u5706\u89d2\u77e9\u5f62\uff0c\u5373\u6570\u5b57\u4e0e\u5b57\u7b26\u4e32\u63a5\u6536\u6846\uff0c\u5982\u679c\u4e0b\u65b9check\u5c5e\u6027\u7684\u503c\u4e3aBoolean\uff0c\u5219\u6b64\u5904\u4e3a\u5c16\u89d2\u77e9\u5f62\uff0c\u5373\u5e03\u5c14\u503c\u63a5\u6536\u6846\u3002 \u200b field_dropdown \uff1a\u4e0b\u62c9\u6846\uff0c\u9009\u9879\u5185\u5bb9\u5728option\u4e2d\u5b9a\u4e49\u3002 \u200b math_angle \uff1a\u8f93\u5165\u6846\uff0c\u6570\u5b57\u4e0e\u5b57\u7b26\u4e32\u63a5\u6536\u6846\uff0c\u86cb\u70b9\u51fb\u540e\u4f1a\u5f39\u51fa\u4e00\u4e2a\u89d2\u5ea6\u754c\u9762\uff0c\u53ef\u4ee5\u4ee5\u56fe\u5f62\u5316\u65b9\u5f0f\u8bbe\u5b9a\u6b64\u8f93\u5165\u6846\u6570\u503c\u3002 \u200b ... \u4ecd\u6709\u5f88\u591a\u9009\u9879\uff0c\u5f85\u8865\u5145 name \u53c2\u6570\u540d\u79f0\uff0c\u5728\u4ee3\u7801\u8f6c\u8bd1\u51fd\u6570\u4e2d\u4f1a\u6839\u636e\u8fd9\u4e2a\u540d\u79f0\u6765\u83b7\u53d6\u6b21\u53c2\u6570\u7684\u503c\u3002 check \u53ef\u9009\u503c\uff1a \u200b Boolean \uff1a\u5b9a\u4e49\u6b64\u53c2\u6570\u6846\u4ec5\u63a5\u6536\u5e03\u5c14\u503c\u3002 \u200b Number \uff1a\u5b9a\u4e49\u6b64\u53c2\u6570\u6846\u4ec5\u63a5\u6536\u6570\u5b57\u503c\u3002 options \u5b9a\u4e49\u4e0b\u62c9\u6846\u7684\u5185\u5bb9\uff0c\u6570\u7ec4\u7684\u7b2c\u4e00\u4e2a\u503c\u4e3a\u5b9e\u9645\u663e\u793a\u5185\u5bb9\uff0c\u7b2c\u4e8c\u4e2a\u503c\u4e3a\u4ee3\u7801\u8f6c\u8bd1\u65f6\u83b7\u53d6\u7684\u503c\u3002 colour \uff1a \u200b \u79ef\u6728\u989c\u8272\uff0c\u4e00\u822c\u4e00\u4e2a\u6269\u5c55\u6211\u4eec\u901a\u5e38\u90fd\u4f7f\u7528\u540c\u4e00\u4e2a\u989c\u8272\uff0c\u6240\u6b64\u5904\u4ee5\u4e00\u4e2a\u989c\u8272\u53d8\u91cf\u5f15\u5165\u3002 extensions \uff1a \u200b \u8fd9\u4e2a\u53c2\u6570\u51b3\u5b9a\u4e86\uff0c\u79ef\u6728\u7684\u7c7b\u578b\u6216\u8fd9\u8bf4\u662f\u5916\u90e8\u5f62\u72b6\u3002\u53ef\u9009\u503c\u6709\uff1a \u200b shape_statement \uff1a\u53ef\u4ee5\u4e0a\u4e0b\u8fde\u63a5\u79ef\u6728\u7684\u5e38\u89c4\u547d\u4ee4\u65b9\u5757 \u200b output_number \uff1a\u5706\u89d2\u77e9\u5f62\u79ef\u6728\uff0c\u8f93\u51fa\u6570\u5b57\u503c \u200b output_string \uff1a\u5706\u89d2\u77e9\u5f62\u79ef\u6728\uff0c\u8f93\u51fa\u5b57\u7b26\u4e32 \u200b output_boolean \uff1a\u5c16\u89d2\u77e9\u5f62\u79ef\u6728\uff0c\u8f93\u51fa\u5e03\u5c14\u503c \u200b .. \u8fd8\u6709\u4e00\u4e9b\u9009\u9879\uff0c\u5f85\u8865\u5145 generator.js \u00b6 \u6b64\u6587\u4ef6\u5b9a\u4e49\u4e86\u63d2\u4ef6\u79ef\u6728\u7684\u4ee3\u7801\u8f6c\u8bd1\u51fd\u6570\u3002 Blockly . Arduino [ 'DHT_INIT' ] = function ( block ) { let no = Blockly . Arduino . valueToCode ( this , 'no' , Blockly . Arduino . ORDER_ATOMIC ); let pin = this . getFieldValue ( 'pin' ); let mode = this . getFieldValue ( 'mode' ); Blockly . Arduino . includes_ [ 'include_DHT_INIT' ] = `#include \"<DHT.h>\"` ; Blockly . Arduino . definitions_ [ 'define_DHT_INIT_${no}' ] = `DHT dht_ ${ no } ( ${ pin } , ${ mode } );` ; return '' ; } Blockly . Arduino [ 'DHT_READ_HUMIDITY' ] = function ( block ) { let no = Blockly . Arduino . valueToCode ( this , 'no' , Blockly . Arduino . ORDER_ATOMIC ); return [ `dht_ ${ no } .readHumidity()` , Blockly . Arduino . ORDER_ATOMIC ]; } \u5728\u8f6c\u8bd1\u51fd\u6570\u4e2d\uff0c\u6709\u4e24\u4e2a\u51fd\u6570\u65b9\u5f0f\u6765\u83b7\u53d6\u79ef\u6728\u5185\u90e8\u53c2\u6570\uff1a Blockly.Arduino.valueToCode \uff1a \u200b \u6b64\u51fd\u6570\u7528\u4e8e\u83b7\u53d6\u79ef\u6728\u5185\u90e8\u7684\u53ef\u4ee5\u63a5\u6536\u5176\u4ed6\u79ef\u6728\u8f93\u5165\u7684\u53c2\u6570\u5185\u5bb9\uff08\u7531\u4e8e\u8fd9\u7c7b\u8f93\u5165\u6846\u4e2d\u53ef\u80fd\u4f1a\u653e\u7f6e\u5176\u4ed6\u79ef\u6728\uff0c\u4f7f\u7528\u8be5\u51fd\u6570\u4f1a\u7ee7\u7eed\u8c03\u7528\u89e3\u6790\u5176\u5185\u5bb9\u79ef\u6728\u5185\u5bb9\uff09\u3002\u51fd\u6570\u7b2c\u4e00\u4e2a\u53c2\u6570\u8f93\u5165\u8fd9\u4e2a\u79ef\u6728\u672c\u8eab\u5373this\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u6b64\u8f93\u5165\u6846\u7684\u540d\u79f0\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u4e3a\u53c2\u6570\u4f18\u5148\u7ea7\uff0c\u76f4\u63a5\u9ed8\u8ba4\u4f7f\u7528Blockly.Arduino.ORDER_ATOMIC\u5373\u53ef\u3002 this.getFieldValue \u200b \u6b64\u51fd\u6570\u7528\u4e8e\u83b7\u53d6\u79ef\u6728\u5185\u90e8\u4e0b\u62c9\u6846\u53c2\u6570\u7684\u5185\u5bb9 \u79ef\u6728\u4ee3\u7801\u7684\u7ec4\u6210\u6709\u4e24\u4e2a\u90e8\u5206\uff0c\u4e00\u662f\u5b9a\u4e49\u5728\u5f00\u5934\u4f4d\u7f6e\u7684include\u7b49\u5185\u5bb9\uff0c\u4e8c\u662f\u5728\u79ef\u6728\u672c\u8eab\u4f4d\u7f6e\u751f\u6210\u7684\u4ee3\u7801\u5185\u5bb9\u3002\u5bf9\u4e8e\u524d\u8005\uff1a Blockly.Arduino.includes_\u3001Blockly.Arduino.definitions_\u3001Blockly.Arduino.definitions_\u3001Blockly.Arduino.setups_\u3001Blockly.Arduino.loops_ \u4e3a\u8fd9\u51e0\u4e2a\u53d8\u91cf\u8d4b\u503c\uff0c\u4f1a\u5728\u4ee3\u7801\u5bf9\u5e94\u7684\u4f4d\u7f6e\u751f\u6210\u5b9a\u4e49\u7684\u5185\u5bb9\u3002\u6ce8\u610f\u8fd9\u91cc\u4e3a\u6570\u7ec4\u5f62\u5f0f\uff0c\u76f8\u540c\u540d\u79f0\u7684\u6570\u7ec4\u5185\u5bb9\u4e0d\u4f1a\u91cd\u590d\u751f\u6210\u3002\u653e\u7f6e\u62d6\u62fd\u540c\u4e00\u4e2a\u79ef\u6728\u65f6\u751f\u6210\u91cd\u590d\u7684\u4ee3\u7801\u5185\u5bb9\u3002 \u800c\u5bf9\u4e8e\u540e\u8005\uff0c\u79ef\u6728\u672c\u8eab\u4f4d\u7f6e\u7684\u4ee3\u7801\u9700\u8981\u5728return\u4e2d\u8fd4\u56de\u3002\u5982\u679c\u79ef\u6728\u662f\u4e00\u4e2a\u8f93\u51fa\u7c7b\u578b\uff0c\u8fd8\u9700\u8981\u5728\u8fd4\u56de\u65f6\u8fd4\u56de\u4e00\u4e2a\u4ee3\u7801\u4f18\u5148\u7ea7\uff0c\u6b64\u5904\u76f4\u63a5\u4f7f\u7528Blockly.Arduino.ORDER_ATOMIC\u5373\u53ef\u3002 toolbox.xml \u00b6 \u6b64\u6587\u4ef6\u5b9a\u4e49\u4e86\u79ef\u6728\u5728toolbox\u4e2d\u7684\u663e\u793a\u5185\u5bb9\u3002\u4ee5\u4e0b\u4e3aDHT\u6837\u677f\u7684\u4ee3\u7801\u7247\u6bb5\u3002 <category name= \"%{BKY_DHT_CATEGORY}\" id= \"DHT_CATEGORY\" colour= \"#7ED321\" secondaryColour= \"#71BE1E\" > <block type= \"DHT_INIT\" id= \"DHT_INIT\" > <value name= \"no\" > <shadow type= \"math_number\" > <field name= \"NUM\" > 1 </field> </shadow> </value> </block> <block type= \"DHT_READ_HUMIDITY\" id= \"DHT_READ_HUMIDITY\" > <value name= \"no\" > <shadow type= \"math_number\" > <field name= \"NUM\" > 1 </field> </shadow> </value> </block> <block type= \"DHT_READ_TEMPERATURE\" id= \"DHT_READ_TEMPERATURE\" > <value name= \"no\" > <shadow type= \"math_number\" > <field name= \"NUM\" > 1 </field> </shadow> </value> </block> </category> \u6b64\u5904\u76ee\u5f55\u7684\u540d\u79f0\u4e3a\u4e86\u591a\u8bed\u8a00\u7ffb\u8bd1\uff0c\u8c03\u7528\u4e86msg\u4e2dDHT_CATEGORY\u7684\u503c\uff0c\u4e0d\u8fc7\u5728\u8fd9\u91cc\u4f7f\u7528\u65f6\u9700\u8981\u5728\u524d\u65b9\u6dfb\u52a0 BKY_ \u800c\u540e\u4e0b\u65b9\u5c31\u662f\u4e4b\u524d\u6211\u4eec\u5b9a\u4e49\u7684\u79ef\u6728\u7684\u7ed3\u6784\uff0c\u4e0d\u8fc7\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u91cc\u6211\u4eec\u8fd8\u9700\u8981\u5bf9\u79ef\u6728\u5185\u90e8\u7684input_value\u8d4b\u521d\u59cb\u503c\uff0c\u5373\u4ee3\u7801\u7247\u6bb5\u4e2dblock\u5185\u90e8\u7684value\u5185\u5bb9\u3002\u79ef\u6728\u4e0b\u62c9\u83dc\u5355\u4e2d\u9ed8\u8ba4\u503c\u662f\u6392\u7b2c\u4e00\u4e2a\u7684\u9009\u9879\uff0c\u5982\u679c\u6211\u4eec\u9700\u8981\u8bbe\u5b9a\u8be5\u9ed8\u8ba4\u503c\uff0c\u76f4\u63a5\u5728block\u7ed3\u6784\u4e0b\u8bbe\u5b9afield\u5373\u53ef\uff0c\u5982\u4e0b\u6240\u793a\u6211\u4eec\u5bf9dht11\u521d\u59cb\u5316\u79ef\u6728\u7684mode\u9009\u9879\u8bbe\u5b9a\u5176\u503c\u4e3a22\uff0c\u8fd9\u91cc\u9700\u8981\u4f7f\u7528\u5b9e\u9645\u503c\u800c\u975e\u663e\u793a\u503c\u3002 <block type= \"DHT_INIT\" id= \"DHT_INIT\" > <value name= \"no\" > <shadow type= \"math_number\" > <field name= \"NUM\" > 1 </field> </shadow> </value> <field name= \"mode\" > 22 </field> </block> \u6d4b\u8bd5\u63d2\u4ef6 \u00b6 \u5b8c\u6210\u4fee\u6539\u540e\u6211\u4eec\u91cd\u542f\u670d\u52a1\u5668\uff0c\u800c\u540e\u5728GUI\u754c\u9762\u4e2d\u5373\u53ef\u6d4b\u8bd5\u8fd9\u4e2a\u63d2\u4ef6\u4e86\u3002","title":"\u5982\u4f55\u6dfb\u52a0\u65b0\u7684\u8bbe\u5907\u6269\u5c55"},{"location":"software-developer-reference/how-to-add-a-new-extension/#_1","text":"","title":"\u5982\u4f55\u6dfb\u52a0\u65b0\u7684\u8bbe\u5907\u6269\u5c55"},{"location":"software-developer-reference/how-to-add-a-new-extension/#_2","text":"\u5728 scratch-HW \u4e2d devices extension \u662f\u4e3adevice\u8bbe\u5907\u63d0\u4f9b\u7684\u6269\u5c55\uff0c\u4e0d\u540c\u4e8escratch\u539f\u672c\u7684\u6269\u5c55\uff0cdevices extension\u4e0d\u4f1a\u88abwebpack\u6253\u5305\uff0c\u5b83\u662f\u7531\u4e00\u4e2a\u5916\u90e8\u7684\u6269\u5c55\u670d\u52a1\u5668\u63d0\u4f9b\u7684\uff0c\u5f53\u7136\u8fd9\u4e2a\u670d\u52a1\u5668\u53ef\u4ee5\u662f\u8fdc\u7a0b\u7684\u4e5f\u53ef\u4ee5\u662f\u672c\u5730\u7684\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u6211\u4eec\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6269\u5c55\u7684\u52a8\u6001\u4fee\u6539\u548c\u52a0\u8f7d\u529f\u80fd\u4e86\u3002","title":"\u6982\u8ff0"},{"location":"software-developer-reference/how-to-add-a-new-extension/#_3","text":"\u5728scratch-extension-server\\src\u4e0b\u590d\u5236dht11\u4e3a\u4e00\u4e2a\u65b0\u7684\u6587\u4ef6\u5939\uff0c\u5e76\u5c06\u5176\u6539\u540d\u4e3a\u4f60\u7684\u6269\u5c55\u7684\u540d\u5b57\u3002","title":"\u5177\u4f53\u6b65\u9aa4"},{"location":"software-developer-reference/how-to-add-a-new-extension/#indexjs","text":"index.js\u6587\u4ef6\u7684\u5185\u5bb9\u63cf\u8ff0\u4e86\u6b64\u63d2\u4ef6\u7684\u540d\u79f0\uff0c\u7248\u672c\uff0c\u4f5c\u8005\u7b49\u663e\u793a\u5185\u5bb9\uff0c\u4e5f\u63cf\u8ff0\u4e86\u6b64\u63d2\u4ef6\u7684\u79ef\u6728\u6e32\u67d3\uff0c\u4ee3\u7801\u8f6c\u8bd1\u7b49\u51fd\u6570\u6587\u4ef6\u7684\u4f4d\u7f6e\u3002\u4e0b\u9762\u4ee5dht11\u7684\u6587\u4ef6\u4e3e\u4f8b\u3002 const formatMessage = require ( 'format-message' ); var path = require ( 'path' ); const staticPath = path . relative ( __dirname + '/../../src' , __dirname ); const dht11 = { name : \"DHT11\" , extensionId : 'dht11' , version : \"1.0.0\" , supportDevice : [ 'arduinoUno' ], author : 'Yang' , iconURL : staticPath + '/asset/DTH11.png' , description : formatMessage ({ id : 'dht11.description' , default : 'DHT11 Temperature and humidity sensor module.' , description : 'Description description of dht11' }), featured : true , blocks : staticPath + '/blocks.js' , generator : staticPath + '/generator.js' , toolbox : staticPath + '/toolbox.xml' , msg : staticPath + '/msg.js' , location : 'local' , // or 'remote' link : 'https://www.baidu.com' , } module . exports = dht11 ; \u4ee5\u4e0b\u5e26\u6709\u661f\u53f7*\u7684\u53c2\u6570\u4e3a\u5fc5\u987b\u53c2\u6570 name* \u663e\u793a\u5728\u6269\u5c55\u9009\u62e9\u754c\u9762\u7684\u540d\u5b57 extensionId* \u6269\u5c55\u7684\u552f\u4e00ID version \u663e\u793a\u5728\u6269\u5c55\u9009\u62e9\u754c\u9762\u7684\u7248\u672c\u53f7 supportDevice* \u652f\u6301\u7684\u8bbe\u5907\uff0c\u6269\u5c55\u53ea\u4f1a\u9009\u62e9\u4e86\u5bf9\u5e94\u652f\u6301\u7684\u8bbe\u5907\u540e\u624d\u4f1a\u5728\u6269\u5c55\u9009\u62e9\u754c\u9762\u663e\u793a author \u663e\u793a\u5728\u6269\u5c55\u9009\u62e9\u754c\u9762\u7684\u4f5c\u8005\u540d\u5b57 iconURL* \u663e\u793a\u5728\u6269\u5c55\u9009\u62e9\u754c\u9762\u7684\u56fe\u7247\uff0c\u56fe\u7247\u6bd4\u4f8b\u548c\u50cf\u7d20\u53c2\u6570\u8bf7\u53c2\u7167DHT11\u6837\u4f8b\u4e2d\u7684\u4fee\u6539 description \u663e\u793a\u5728\u6269\u5c55\u9009\u62e9\u754c\u9762\u56fe\u7247\u4e0b\u65b9\u6269\u5c55\u4ecb\u7ecd\u5185\u5bb9 featured* \u6b64\u53c2\u6570\u4e3a\u5185\u90e8\u53c2\u6570\uff0c\u5fc5\u987b\u8bbe\u7f6e\u4e3atrue blocks* \u6269\u5c55\u7684\u79ef\u6728\u6e32\u67d3\u751f\u6210\u4ee3\u7801 generator* \u6269\u5c55\u7684\u79ef\u6728\u7684\u8f6c\u8f6c\u8bd1\u4ee3\u7801 toolbox* \u6269\u5c55\u7684\u5de5\u5177\u7bb1\u4ee3\u7801\uff0c\u63cf\u8ff0\u6269\u5c55\u5728\u754c\u9762\u5de6\u4fa7\u5de5\u5177\u7bb1\u4e2d\u7684\u663e\u793a\u548c\u6392\u5217\u65b9\u5f0f msg* \u6269\u5c55\u7684\u591a\u8bed\u8a00\u652f\u6301 location* \u53ea\u6709 local / remote \u4e24\u4e2a\u9009\u9879\uff0c\u7528\u6765\u6807\u8bc6\u6269\u5c55\u662f\u90e8\u7f72\u5728\u4e91\u7aef\u8fd8\u662f\u672c\u5730\uff0c\u5728\u76ee\u524d\u7684\u8c03\u8bd5\u7248\u4e2d\uff0c\u76f4\u63a5\u9ed8\u8ba4\u4e3alocal \u5373\u53ef link \u4f3c\u4e4e\u76ee\u524d\u8fd8\u6ca1\u6709\u4f7f\u7528","title":"index.js"},{"location":"software-developer-reference/how-to-add-a-new-extension/#blocksjs","text":"\u6b64\u6587\u4ef6\u5b9a\u4e49\u4e86\u63d2\u4ef6\u5185\u90e8\u7684\u79ef\u6728\u7684\u6837\u5f0f\uff0c\u4ee5\u4e0b\u4e3aDHT\u6837\u677f\u7684\u4ee3\u7801\u7247\u6bb5\u3002 // src\\dht11\\blocks.js var color = '#28BFE6' ; Blockly . Blocks [ 'DHT_INIT' ] = { init : function () { this . jsonInit ({ \"message0\" : Blockly . Msg . DHT_INIT , \"args0\" : [{ \"type\" : \"input_value\" , \"name\" : \"no\" }, { \"type\" : \"field_dropdown\" , \"name\" : \"pin\" , \"options\" : [ [ '0' , '0' ], [ '1' , '1' ], [ '2' , '2' ], [ '3' , '3' ], [ '4' , '4' ], [ '5' , '5' ], [ '6' , '6' ], [ '7' , '7' ], [ '8' , '8' ], [ '9' , '9' ], [ '10' , '10' ], [ '11' , '11' ], [ '12' , '12' ], [ '13' , '13' ], [ 'A0' , 'A0' ], [ 'A1' , 'A1' ], [ 'A2' , 'A2' ], [ 'A3' , 'A3' ], [ 'A4' , 'A4' ], [ 'A5' , 'A5' ]] }, { \"type\" : \"field_dropdown\" , \"name\" : \"mode\" , \"options\" : [ [ 'dht11' , '11' ], [ 'dht21' , '21' ], [ 'dht22' , '22' ]] }], \"colour\" : color , \"extensions\" : [ \"shape_statement\" ] }); } }; // src\\dht11\\msg.js line 4 DHT_INIT : 'init dht %1 pin %2 mode %3' , \u4e00\u4e2a\u79ef\u6728\u5757\u7531\u4ee5\u4e0b\u53c2\u6570\u6784\u6210 message0 \uff1a \u200b \u79ef\u6728\u6574\u4f53\u663e\u793a\u5185\u5bb9\u7531message0\u5185\u5bb9\u51b3\u5b9a\uff0c\u7531\u4e8e\u8fd9\u91cc\u7531\u591a\u8bed\u8a00\u7ffb\u8bd1\u5185\u5bb9\uff0c\u6240\u4ee5\u8fd9\u91cc\u7684\u5185\u5bb9\u662f\u7531 msg.js \u4e2d\u5b9a\u4e49\u7684\uff0c\u53ef\u4ee5\u770b\u5230\u79ef\u6728\u4e2d\u7684\u53c2\u6570\u662f\u7531 %1 %2\u8fd9\u6837\u7684\u5f62\u5f0f\u5b9a\u4e49\u7684\u3002\u800c\u540e\u5176\u53c2\u6570\u7684\u5177\u4f53\u5185\u5bb9\u7531args0\u5b9a\u4e49\u7684\u6570\u7ec4\u5b9a\u4e49\u3002 args0 \u5c5e\u6027\uff1a type \u53ef\u9009\u503c\uff1a \u200b input_value \uff1a\u8f93\u5165\u6846\uff0c\u9ed8\u8ba4\u4e3a\u5706\u89d2\u77e9\u5f62\uff0c\u5373\u6570\u5b57\u4e0e\u5b57\u7b26\u4e32\u63a5\u6536\u6846\uff0c\u5982\u679c\u4e0b\u65b9check\u5c5e\u6027\u7684\u503c\u4e3aBoolean\uff0c\u5219\u6b64\u5904\u4e3a\u5c16\u89d2\u77e9\u5f62\uff0c\u5373\u5e03\u5c14\u503c\u63a5\u6536\u6846\u3002 \u200b field_dropdown \uff1a\u4e0b\u62c9\u6846\uff0c\u9009\u9879\u5185\u5bb9\u5728option\u4e2d\u5b9a\u4e49\u3002 \u200b math_angle \uff1a\u8f93\u5165\u6846\uff0c\u6570\u5b57\u4e0e\u5b57\u7b26\u4e32\u63a5\u6536\u6846\uff0c\u86cb\u70b9\u51fb\u540e\u4f1a\u5f39\u51fa\u4e00\u4e2a\u89d2\u5ea6\u754c\u9762\uff0c\u53ef\u4ee5\u4ee5\u56fe\u5f62\u5316\u65b9\u5f0f\u8bbe\u5b9a\u6b64\u8f93\u5165\u6846\u6570\u503c\u3002 \u200b ... \u4ecd\u6709\u5f88\u591a\u9009\u9879\uff0c\u5f85\u8865\u5145 name \u53c2\u6570\u540d\u79f0\uff0c\u5728\u4ee3\u7801\u8f6c\u8bd1\u51fd\u6570\u4e2d\u4f1a\u6839\u636e\u8fd9\u4e2a\u540d\u79f0\u6765\u83b7\u53d6\u6b21\u53c2\u6570\u7684\u503c\u3002 check \u53ef\u9009\u503c\uff1a \u200b Boolean \uff1a\u5b9a\u4e49\u6b64\u53c2\u6570\u6846\u4ec5\u63a5\u6536\u5e03\u5c14\u503c\u3002 \u200b Number \uff1a\u5b9a\u4e49\u6b64\u53c2\u6570\u6846\u4ec5\u63a5\u6536\u6570\u5b57\u503c\u3002 options \u5b9a\u4e49\u4e0b\u62c9\u6846\u7684\u5185\u5bb9\uff0c\u6570\u7ec4\u7684\u7b2c\u4e00\u4e2a\u503c\u4e3a\u5b9e\u9645\u663e\u793a\u5185\u5bb9\uff0c\u7b2c\u4e8c\u4e2a\u503c\u4e3a\u4ee3\u7801\u8f6c\u8bd1\u65f6\u83b7\u53d6\u7684\u503c\u3002 colour \uff1a \u200b \u79ef\u6728\u989c\u8272\uff0c\u4e00\u822c\u4e00\u4e2a\u6269\u5c55\u6211\u4eec\u901a\u5e38\u90fd\u4f7f\u7528\u540c\u4e00\u4e2a\u989c\u8272\uff0c\u6240\u6b64\u5904\u4ee5\u4e00\u4e2a\u989c\u8272\u53d8\u91cf\u5f15\u5165\u3002 extensions \uff1a \u200b \u8fd9\u4e2a\u53c2\u6570\u51b3\u5b9a\u4e86\uff0c\u79ef\u6728\u7684\u7c7b\u578b\u6216\u8fd9\u8bf4\u662f\u5916\u90e8\u5f62\u72b6\u3002\u53ef\u9009\u503c\u6709\uff1a \u200b shape_statement \uff1a\u53ef\u4ee5\u4e0a\u4e0b\u8fde\u63a5\u79ef\u6728\u7684\u5e38\u89c4\u547d\u4ee4\u65b9\u5757 \u200b output_number \uff1a\u5706\u89d2\u77e9\u5f62\u79ef\u6728\uff0c\u8f93\u51fa\u6570\u5b57\u503c \u200b output_string \uff1a\u5706\u89d2\u77e9\u5f62\u79ef\u6728\uff0c\u8f93\u51fa\u5b57\u7b26\u4e32 \u200b output_boolean \uff1a\u5c16\u89d2\u77e9\u5f62\u79ef\u6728\uff0c\u8f93\u51fa\u5e03\u5c14\u503c \u200b .. \u8fd8\u6709\u4e00\u4e9b\u9009\u9879\uff0c\u5f85\u8865\u5145","title":"blocks.js"},{"location":"software-developer-reference/how-to-add-a-new-extension/#generatorjs","text":"\u6b64\u6587\u4ef6\u5b9a\u4e49\u4e86\u63d2\u4ef6\u79ef\u6728\u7684\u4ee3\u7801\u8f6c\u8bd1\u51fd\u6570\u3002 Blockly . Arduino [ 'DHT_INIT' ] = function ( block ) { let no = Blockly . Arduino . valueToCode ( this , 'no' , Blockly . Arduino . ORDER_ATOMIC ); let pin = this . getFieldValue ( 'pin' ); let mode = this . getFieldValue ( 'mode' ); Blockly . Arduino . includes_ [ 'include_DHT_INIT' ] = `#include \"<DHT.h>\"` ; Blockly . Arduino . definitions_ [ 'define_DHT_INIT_${no}' ] = `DHT dht_ ${ no } ( ${ pin } , ${ mode } );` ; return '' ; } Blockly . Arduino [ 'DHT_READ_HUMIDITY' ] = function ( block ) { let no = Blockly . Arduino . valueToCode ( this , 'no' , Blockly . Arduino . ORDER_ATOMIC ); return [ `dht_ ${ no } .readHumidity()` , Blockly . Arduino . ORDER_ATOMIC ]; } \u5728\u8f6c\u8bd1\u51fd\u6570\u4e2d\uff0c\u6709\u4e24\u4e2a\u51fd\u6570\u65b9\u5f0f\u6765\u83b7\u53d6\u79ef\u6728\u5185\u90e8\u53c2\u6570\uff1a Blockly.Arduino.valueToCode \uff1a \u200b \u6b64\u51fd\u6570\u7528\u4e8e\u83b7\u53d6\u79ef\u6728\u5185\u90e8\u7684\u53ef\u4ee5\u63a5\u6536\u5176\u4ed6\u79ef\u6728\u8f93\u5165\u7684\u53c2\u6570\u5185\u5bb9\uff08\u7531\u4e8e\u8fd9\u7c7b\u8f93\u5165\u6846\u4e2d\u53ef\u80fd\u4f1a\u653e\u7f6e\u5176\u4ed6\u79ef\u6728\uff0c\u4f7f\u7528\u8be5\u51fd\u6570\u4f1a\u7ee7\u7eed\u8c03\u7528\u89e3\u6790\u5176\u5185\u5bb9\u79ef\u6728\u5185\u5bb9\uff09\u3002\u51fd\u6570\u7b2c\u4e00\u4e2a\u53c2\u6570\u8f93\u5165\u8fd9\u4e2a\u79ef\u6728\u672c\u8eab\u5373this\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u6b64\u8f93\u5165\u6846\u7684\u540d\u79f0\uff0c\u7b2c\u4e09\u4e2a\u53c2\u6570\u4e3a\u53c2\u6570\u4f18\u5148\u7ea7\uff0c\u76f4\u63a5\u9ed8\u8ba4\u4f7f\u7528Blockly.Arduino.ORDER_ATOMIC\u5373\u53ef\u3002 this.getFieldValue \u200b \u6b64\u51fd\u6570\u7528\u4e8e\u83b7\u53d6\u79ef\u6728\u5185\u90e8\u4e0b\u62c9\u6846\u53c2\u6570\u7684\u5185\u5bb9 \u79ef\u6728\u4ee3\u7801\u7684\u7ec4\u6210\u6709\u4e24\u4e2a\u90e8\u5206\uff0c\u4e00\u662f\u5b9a\u4e49\u5728\u5f00\u5934\u4f4d\u7f6e\u7684include\u7b49\u5185\u5bb9\uff0c\u4e8c\u662f\u5728\u79ef\u6728\u672c\u8eab\u4f4d\u7f6e\u751f\u6210\u7684\u4ee3\u7801\u5185\u5bb9\u3002\u5bf9\u4e8e\u524d\u8005\uff1a Blockly.Arduino.includes_\u3001Blockly.Arduino.definitions_\u3001Blockly.Arduino.definitions_\u3001Blockly.Arduino.setups_\u3001Blockly.Arduino.loops_ \u4e3a\u8fd9\u51e0\u4e2a\u53d8\u91cf\u8d4b\u503c\uff0c\u4f1a\u5728\u4ee3\u7801\u5bf9\u5e94\u7684\u4f4d\u7f6e\u751f\u6210\u5b9a\u4e49\u7684\u5185\u5bb9\u3002\u6ce8\u610f\u8fd9\u91cc\u4e3a\u6570\u7ec4\u5f62\u5f0f\uff0c\u76f8\u540c\u540d\u79f0\u7684\u6570\u7ec4\u5185\u5bb9\u4e0d\u4f1a\u91cd\u590d\u751f\u6210\u3002\u653e\u7f6e\u62d6\u62fd\u540c\u4e00\u4e2a\u79ef\u6728\u65f6\u751f\u6210\u91cd\u590d\u7684\u4ee3\u7801\u5185\u5bb9\u3002 \u800c\u5bf9\u4e8e\u540e\u8005\uff0c\u79ef\u6728\u672c\u8eab\u4f4d\u7f6e\u7684\u4ee3\u7801\u9700\u8981\u5728return\u4e2d\u8fd4\u56de\u3002\u5982\u679c\u79ef\u6728\u662f\u4e00\u4e2a\u8f93\u51fa\u7c7b\u578b\uff0c\u8fd8\u9700\u8981\u5728\u8fd4\u56de\u65f6\u8fd4\u56de\u4e00\u4e2a\u4ee3\u7801\u4f18\u5148\u7ea7\uff0c\u6b64\u5904\u76f4\u63a5\u4f7f\u7528Blockly.Arduino.ORDER_ATOMIC\u5373\u53ef\u3002","title":"generator.js"},{"location":"software-developer-reference/how-to-add-a-new-extension/#toolboxxml","text":"\u6b64\u6587\u4ef6\u5b9a\u4e49\u4e86\u79ef\u6728\u5728toolbox\u4e2d\u7684\u663e\u793a\u5185\u5bb9\u3002\u4ee5\u4e0b\u4e3aDHT\u6837\u677f\u7684\u4ee3\u7801\u7247\u6bb5\u3002 <category name= \"%{BKY_DHT_CATEGORY}\" id= \"DHT_CATEGORY\" colour= \"#7ED321\" secondaryColour= \"#71BE1E\" > <block type= \"DHT_INIT\" id= \"DHT_INIT\" > <value name= \"no\" > <shadow type= \"math_number\" > <field name= \"NUM\" > 1 </field> </shadow> </value> </block> <block type= \"DHT_READ_HUMIDITY\" id= \"DHT_READ_HUMIDITY\" > <value name= \"no\" > <shadow type= \"math_number\" > <field name= \"NUM\" > 1 </field> </shadow> </value> </block> <block type= \"DHT_READ_TEMPERATURE\" id= \"DHT_READ_TEMPERATURE\" > <value name= \"no\" > <shadow type= \"math_number\" > <field name= \"NUM\" > 1 </field> </shadow> </value> </block> </category> \u6b64\u5904\u76ee\u5f55\u7684\u540d\u79f0\u4e3a\u4e86\u591a\u8bed\u8a00\u7ffb\u8bd1\uff0c\u8c03\u7528\u4e86msg\u4e2dDHT_CATEGORY\u7684\u503c\uff0c\u4e0d\u8fc7\u5728\u8fd9\u91cc\u4f7f\u7528\u65f6\u9700\u8981\u5728\u524d\u65b9\u6dfb\u52a0 BKY_ \u800c\u540e\u4e0b\u65b9\u5c31\u662f\u4e4b\u524d\u6211\u4eec\u5b9a\u4e49\u7684\u79ef\u6728\u7684\u7ed3\u6784\uff0c\u4e0d\u8fc7\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u91cc\u6211\u4eec\u8fd8\u9700\u8981\u5bf9\u79ef\u6728\u5185\u90e8\u7684input_value\u8d4b\u521d\u59cb\u503c\uff0c\u5373\u4ee3\u7801\u7247\u6bb5\u4e2dblock\u5185\u90e8\u7684value\u5185\u5bb9\u3002\u79ef\u6728\u4e0b\u62c9\u83dc\u5355\u4e2d\u9ed8\u8ba4\u503c\u662f\u6392\u7b2c\u4e00\u4e2a\u7684\u9009\u9879\uff0c\u5982\u679c\u6211\u4eec\u9700\u8981\u8bbe\u5b9a\u8be5\u9ed8\u8ba4\u503c\uff0c\u76f4\u63a5\u5728block\u7ed3\u6784\u4e0b\u8bbe\u5b9afield\u5373\u53ef\uff0c\u5982\u4e0b\u6240\u793a\u6211\u4eec\u5bf9dht11\u521d\u59cb\u5316\u79ef\u6728\u7684mode\u9009\u9879\u8bbe\u5b9a\u5176\u503c\u4e3a22\uff0c\u8fd9\u91cc\u9700\u8981\u4f7f\u7528\u5b9e\u9645\u503c\u800c\u975e\u663e\u793a\u503c\u3002 <block type= \"DHT_INIT\" id= \"DHT_INIT\" > <value name= \"no\" > <shadow type= \"math_number\" > <field name= \"NUM\" > 1 </field> </shadow> </value> <field name= \"mode\" > 22 </field> </block>","title":"toolbox.xml"},{"location":"software-developer-reference/how-to-add-a-new-extension/#_4","text":"\u5b8c\u6210\u4fee\u6539\u540e\u6211\u4eec\u91cd\u542f\u670d\u52a1\u5668\uff0c\u800c\u540e\u5728GUI\u754c\u9762\u4e2d\u5373\u53ef\u6d4b\u8bd5\u8fd9\u4e2a\u63d2\u4ef6\u4e86\u3002","title":"\u6d4b\u8bd5\u63d2\u4ef6"}]}